{"html_url":"https://gist.github.com/1672254","url":"https://api.github.com/gists/1672254","created_at":"2012-01-24T20:06:54Z","description":"Binary Tetris - 140byt.es","public":true,"git_pull_url":"git://gist.github.com/1672254.git","files":{"annotated.js":{"type":"application/javascript","content":"function (\n  \n  a,  // current board\n  b,  // current block\n  c,  // current position\n  d,  // new block offset for position\n  \n  e   // placeholder: the layout to return\n){\n  \n  return \n  \n    d += c,                     // add offset to position\n                                \n    e = a | b << d,             // render layout based on board and moved block\n                                \n    d < 0  |  a & b<<d          // check if block touches bottom line \n                                // or if block collide with board ...\n                                \n    && (                           // ... if so ...\n                                \n      a = e =                       // assign new board and layout\n        parseInt(                   // convert back from base 32 \n                                    \n          ( a | b << c )            // get board based on last position\n            .toString(              // convert board to base 32 (2^5)\n              d = 32                // reset block position to top (32)\n            )         \n            .replace(/v/, \"\"),      // remove filled line (\"v\" = 11111)\n                                    \n          d                         // base 32 (2^5) for parseInt\n        ),                          \n                                    \n      b = new Date % 2 ?            // generate new block for next round\n        1 :                         // single \"#\" (1 => 1)\n        3                           // double \"##\" (3 => 111)\n    ),\n    \n    [                           // the final return \n      a,                        // new board\n      b,                        // new block\n      d,                        // new position\n      e                         // final layout to render\n    ]\n}","size":1771,"filename":"annotated.js","raw_url":"https://gist.github.com/raw/1672254/e91e169ec3f8056e6f7df3316bd4b8a9ff3cbffa/annotated.js","language":"JavaScript"},"LICENSE.txt":{"type":"text/plain","content":"            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n                    Version 2, December 2004\n\n Copyright (C) 2011 YOUR_NAME_HERE <YOUR_URL_HERE>\n\n Everyone is permitted to copy and distribute verbatim or modified\n copies of this license document, and changing it is allowed as long\n as the name is changed.\n\n            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n\n  0. You just DO WHAT THE FUCK YOU WANT TO.","size":483,"filename":"LICENSE.txt","raw_url":"https://gist.github.com/raw/1672254/dfb480a5038214d152544bddb412dfe2e8656413/LICENSE.txt","language":"Text"},"README.md":{"type":"text/plain","content":"Binary Tetris - 140byt.es\n======================================\n\nA simplified variant of the classic tetris game done in less that 140 bytes of JavaScript.\n\n[**Click here to play the DEMO**](http://jsbin.com/egiqul/49)!\n\nFeel free to [edit](http://jsbin.com/egiqul/49/edit#javascript,live) the source and follow me on Twitter ([@aemkei](http://twitter.com/aemkei)).\n\n### Example Layout\n\n    1.       2.       3.       4.       5.\n    \n    .....    .....    .....    .....    .....\n    .....    .....    .....    .....    .....\n    ...##    .....    .....    .....    .....\n    .....    ...##    .....    .....    .....\n    ##...    ##...    ##.##    ##...    .....\n    ###..    ###..    ###..    #####    ##...\n\n\n\n### More Information\n\nThe main logic to move blocks, detect collision, assign new blocks, remove full lines and render the layout are included. Excluded are keyboard controls and the final rendering.\n\nThis version is heavy based on binary numbers and bit shift operators. I had to limit the board size to 5x6 (30 bits), because JavaScript converts numbers to 32-bit integers when using bitwise operators. The two left bits are later uses to add the correct padding when dealing with numbers that start with \"0\". \n\n\n### Basic Concept\n\nThe Board      \n\n                      00000         .....\n    798               11000   =>    ##... \n                      11110         ####.\n \nThe Block\n\n    3                 00011  =>     ...##\n\n\nChecking for Collision\n\n                      00000         .....\n    798&3 = 2         00000  =>     .....\n                      00010         ...X.\n\nMoving the Block at X Axis\n\n    3 << 1 = 6        00110   =>    ..##.\n\nMoving the Block at Y Axis\n\n                      00011         ...##\n    3<<10 = 3072      00000   =>    .....\n                      00000         .....\n\nCombining Block and Board\n\n                      00011         ...##\n    798|3072 = 3870   11000   =>    ##...\n                      11110         ####.\n\n\n\nFind full line (using base 32)\n\n                      00011         3\n    3999              11100   =>    s\n                      11111         v\n\n\n\n\nFor more information\n--------------------\n\nSee the [140byt.es](http://140byt.es) site for a showcase of entries (built itself using 140-byte entries!), and follow [@140bytes](http://twitter.com/140bytes) on Twitter.\n\nTo learn about byte-saving hacks for your own code, or to contribute what you've learned, head to [the wiki](https://github.com/jed/140bytes/wiki/Byte-saving-techniques).\n\n140byt.es is brought to you by [Jed Schmidt](http://jed.is), with help from Alex Kloss. It was inspired by work from [Thomas Fuchs](http://mir.aculo.us) and [Dustin Diaz](http://www.dustindiaz.com/).\n","size":2722,"filename":"README.md","raw_url":"https://gist.github.com/raw/1672254/ed7cef6db38001cd2bf16414453c3463be89e2fc/README.md","language":"Markdown"},"index.js":{"type":"application/javascript","content":"function(a,b,c,d,e){return d+=c,e=a|b<<d,d<0|a&b<<d&&(a=e=parseInt((a|b<<c).toString(d=32).replace(/v/,\"\"),d),b=new Date%2?1:3),[a,b,d,e]}","size":138,"filename":"index.js","raw_url":"https://gist.github.com/raw/1672254/0c754ede94895c0e219522cfad18c1767abb6212/index.js","language":"JavaScript"},"test.html":{"type":"text/html","content":"<html>\n<style>body{ font-family: monospace; font-size: 20px}</style>\n<div id=\"output\"></div>\n</html>\n\n<script>\nvar t =\nfunction(a,b,c,d,e){return d+=c,e=a|b<<d,d<0|a&b<<d&&(a=e=parseInt((a|b<<c).toString(d=32).replace(/v/,\"\"),d),b=new Date%2?1:3),[a,b,d,e]}\n\n// Controller and Display\n\nvar out = document.getElementById(\"output\");\n\nvar board = 0,\n    block = 3,\n    position = 32,\n    display;\n\nfunction update(offset){\n  \n  var txt = \"\",\n    result = t(board,block,position, offset);\n    \n  board = result[0];\n  block = result[1]\n  position = result[2]\n  display = result[3];\n\n  display = ( 1<<30 | + display ).toString(2);\n  \n  for(var i=1; i<31;i++){\n    txt += display[i] == \"1\" ? \"#\" : \".\";\n    if(i%5 == 0) txt+= \"<br>\"; \n  }\n  \n  out.innerHTML = txt;\n}\n\nupdate(0);\n\nonkeydown = function(e){\n  \n  var offset = 0;\n  \n  switch (e.keyCode){\n    case 37: offset =  1; break; \n    case 39: offset = -1; break; \n    case 40: offset = -5; break; \n  }\n  \n  update(offset);\n}\n\nvar speed = 1000;\n\nfunction loop(){\n  update(-5);\n  setTimeout(loop, speed-=5);\n}\n  \nloop();\n\n</script>\n","size":1078,"filename":"test.html","raw_url":"https://gist.github.com/raw/1672254/684ab7f07b5d1fcc50a744aeed8e95dc5ea48a0a/test.html","language":"HTML"},"package.json":{"type":"application/json","content":"{\n  \"name\": \"tetris\",\n\n  \"description\": \"A binary variant of the classic Tetris game.\",\n\n  \"keywords\": [\n    \"tetris\",\n    \"game\",\n    \"binary\"\n  ]\n}","size":149,"filename":"package.json","raw_url":"https://gist.github.com/raw/1672254/7143933b3e8e2c079f82fceb59b613ead8fa1d43/package.json","language":"JSON"}},"git_push_url":"git@gist.github.com:1672254.git","history":[{"url":"https://api.github.com/gists/1672254/f27a82034bd53ce9894340a1728884a60c255379","version":"f27a82034bd53ce9894340a1728884a60c255379","committed_at":"2012-02-02T09:37:10Z","change_status":{"additions":1,"deletions":1,"total":2},"user":{"url":"https://api.github.com/users/aemkei","login":"aemkei","gravatar_id":"0d9da77bb99bea710cbf711ed08e57d7","avatar_url":"https://secure.gravatar.com/avatar/0d9da77bb99bea710cbf711ed08e57d7?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1521}},{"url":"https://api.github.com/gists/1672254/6a35d2866f332795c31770a770b7b96d9b19c0d9","version":"6a35d2866f332795c31770a770b7b96d9b19c0d9","committed_at":"2012-02-02T09:36:41Z","change_status":{"additions":1,"deletions":1,"total":2},"user":{"url":"https://api.github.com/users/aemkei","login":"aemkei","gravatar_id":"0d9da77bb99bea710cbf711ed08e57d7","avatar_url":"https://secure.gravatar.com/avatar/0d9da77bb99bea710cbf711ed08e57d7?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1521}},{"url":"https://api.github.com/gists/1672254/56687ba4ca254ab0e50d69ada472d9116b01fc98","version":"56687ba4ca254ab0e50d69ada472d9116b01fc98","committed_at":"2012-02-02T09:36:09Z","change_status":{"additions":3,"deletions":1,"total":4},"user":{"url":"https://api.github.com/users/aemkei","login":"aemkei","gravatar_id":"0d9da77bb99bea710cbf711ed08e57d7","avatar_url":"https://secure.gravatar.com/avatar/0d9da77bb99bea710cbf711ed08e57d7?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1521}},{"url":"https://api.github.com/gists/1672254/b2e6d51a2423ca510cc2f7f2b04e81f9195cf5d6","version":"b2e6d51a2423ca510cc2f7f2b04e81f9195cf5d6","committed_at":"2012-02-02T09:35:18Z","change_status":{"additions":3,"deletions":1,"total":4},"user":{"url":"https://api.github.com/users/aemkei","login":"aemkei","gravatar_id":"0d9da77bb99bea710cbf711ed08e57d7","avatar_url":"https://secure.gravatar.com/avatar/0d9da77bb99bea710cbf711ed08e57d7?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1521}},{"url":"https://api.github.com/gists/1672254/0ef71a41d67b8b4d3f5ac631fd46069cb5099f2a","version":"0ef71a41d67b8b4d3f5ac631fd46069cb5099f2a","committed_at":"2012-01-27T21:35:23Z","change_status":{"additions":8,"deletions":6,"total":14},"user":{"url":"https://api.github.com/users/aemkei","login":"aemkei","gravatar_id":"0d9da77bb99bea710cbf711ed08e57d7","avatar_url":"https://secure.gravatar.com/avatar/0d9da77bb99bea710cbf711ed08e57d7?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1521}},{"url":"https://api.github.com/gists/1672254/289849a576a0de982cc994e8dd6515a42a870046","version":"289849a576a0de982cc994e8dd6515a42a870046","committed_at":"2012-01-27T20:10:47Z","change_status":{"additions":1,"deletions":1,"total":2},"user":{"url":"https://api.github.com/users/aemkei","login":"aemkei","gravatar_id":"0d9da77bb99bea710cbf711ed08e57d7","avatar_url":"https://secure.gravatar.com/avatar/0d9da77bb99bea710cbf711ed08e57d7?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1521}},{"url":"https://api.github.com/gists/1672254/897d73f38bb5a8bfd12820ba605fd540ed0b9816","version":"897d73f38bb5a8bfd12820ba605fd540ed0b9816","committed_at":"2012-01-27T15:41:25Z","change_status":{"additions":2,"deletions":2,"total":4},"user":{"url":"https://api.github.com/users/aemkei","login":"aemkei","gravatar_id":"0d9da77bb99bea710cbf711ed08e57d7","avatar_url":"https://secure.gravatar.com/avatar/0d9da77bb99bea710cbf711ed08e57d7?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1521}},{"url":"https://api.github.com/gists/1672254/41737a377260130d0b4001fc688861b3fb3eca65","version":"41737a377260130d0b4001fc688861b3fb3eca65","committed_at":"2012-01-27T14:55:35Z","change_status":{"additions":2,"deletions":2,"total":4},"user":{"url":"https://api.github.com/users/aemkei","login":"aemkei","gravatar_id":"0d9da77bb99bea710cbf711ed08e57d7","avatar_url":"https://secure.gravatar.com/avatar/0d9da77bb99bea710cbf711ed08e57d7?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1521}},{"url":"https://api.github.com/gists/1672254/6e2cdf5b0bf692cc1d197bb39f7932bc5da8c264","version":"6e2cdf5b0bf692cc1d197bb39f7932bc5da8c264","committed_at":"2012-01-27T14:54:53Z","change_status":{"additions":6,"deletions":8,"total":14},"user":{"url":"https://api.github.com/users/aemkei","login":"aemkei","gravatar_id":"0d9da77bb99bea710cbf711ed08e57d7","avatar_url":"https://secure.gravatar.com/avatar/0d9da77bb99bea710cbf711ed08e57d7?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1521}},{"url":"https://api.github.com/gists/1672254/177a63e2c42c42e4dcb2747f152296819e8ff0ab","version":"177a63e2c42c42e4dcb2747f152296819e8ff0ab","committed_at":"2012-01-27T14:53:24Z","change_status":{"additions":167,"deletions":36,"total":203},"user":{"url":"https://api.github.com/users/aemkei","login":"aemkei","gravatar_id":"0d9da77bb99bea710cbf711ed08e57d7","avatar_url":"https://secure.gravatar.com/avatar/0d9da77bb99bea710cbf711ed08e57d7?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1521}}],"fork_of":{"html_url":"https://gist.github.com/962807","url":"https://api.github.com/gists/962807","created_at":"2011-05-09T16:13:35Z","description":"140byt.es -- Click ↑↑ fork ↑↑ to play!","public":true,"git_pull_url":"git://gist.github.com/962807.git","files":{"annotated.js":{"type":"application/javascript","size":396,"filename":"annotated.js","raw_url":"https://gist.github.com/raw/962807/cd5c9947f41abdfd608a8995e02ba4a160bb2a08/annotated.js","language":"JavaScript"},"LICENSE.txt":{"type":"text/plain","size":483,"filename":"LICENSE.txt","raw_url":"https://gist.github.com/raw/962807/dfb480a5038214d152544bddb412dfe2e8656413/LICENSE.txt","language":"Text"},"README.md":{"type":"text/plain","size":1457,"filename":"README.md","raw_url":"https://gist.github.com/raw/962807/6832f0d91100cdb4373f2cfd42e12fc06532eac9/README.md","language":"Markdown"},"index.js":{"type":"application/javascript","size":140,"filename":"index.js","raw_url":"https://gist.github.com/raw/962807/c89ef021071af3b78eea79bcf0288a6e7873a62e/index.js","language":"JavaScript"},"test.html":{"type":"text/html","size":393,"filename":"test.html","raw_url":"https://gist.github.com/raw/962807/22ac2a8244f3a1fd650faf81dfdde9cbae7453e5/test.html","language":"HTML"},"package.json":{"type":"application/json","size":241,"filename":"package.json","raw_url":"https://gist.github.com/raw/962807/323b4aaa685a2bf7b15abdeed2fe03e11d63859f/package.json","language":"JSON"}},"git_push_url":"git@gist.github.com:962807.git","comments":51,"updated_at":"2011-05-18T12:15:41Z","id":"962807","user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161}},"comments":16,"updated_at":"2012-01-27T15:41:25Z","forks":[{"url":"https://api.github.com/gists/1693268","created_at":"2012-01-28T07:40:11Z","updated_at":"2012-01-28T07:40:11Z","id":"1693268","user":{"url":"https://api.github.com/users/seanhandley","login":"seanhandley","gravatar_id":"17c711351230159c1ec0abd0b4bd47f4","avatar_url":"https://secure.gravatar.com/avatar/17c711351230159c1ec0abd0b4bd47f4?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":98526}},{"url":"https://api.github.com/gists/1705237","created_at":"2012-01-30T16:19:10Z","updated_at":"2012-01-30T16:19:10Z","id":"1705237","user":{"url":"https://api.github.com/users/willknott","login":"willknott","gravatar_id":"561dc24116491b5395b164d93553bd41","avatar_url":"https://secure.gravatar.com/avatar/561dc24116491b5395b164d93553bd41?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":687984}},{"url":"https://api.github.com/gists/1722444","created_at":"2012-02-02T08:57:27Z","updated_at":"2012-02-02T08:57:27Z","id":"1722444","user":{"url":"https://api.github.com/users/putrescer","login":"putrescer","gravatar_id":"cf12752d959c99a5a01b41ffbdb09beb","avatar_url":"https://secure.gravatar.com/avatar/cf12752d959c99a5a01b41ffbdb09beb?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1335481}},{"url":"https://api.github.com/gists/1723410","created_at":"2012-02-02T13:14:41Z","updated_at":"2012-02-02T13:14:41Z","id":"1723410","user":{"url":"https://api.github.com/users/RafalBabinicz","login":"RafalBabinicz","gravatar_id":"8dff5903c3d337d048b6b908e0be9e9b","avatar_url":"https://secure.gravatar.com/avatar/8dff5903c3d337d048b6b908e0be9e9b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":715830}},{"url":"https://api.github.com/gists/1723777","created_at":"2012-02-02T14:43:45Z","updated_at":"2012-02-02T14:43:45Z","id":"1723777","user":{"url":"https://api.github.com/users/chimericdream","login":"chimericdream","gravatar_id":"e379d97527647371155082955de51b04","avatar_url":"https://secure.gravatar.com/avatar/e379d97527647371155082955de51b04?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":198075}},{"url":"https://api.github.com/gists/1724717","created_at":"2012-02-02T17:28:01Z","updated_at":"2012-02-02T17:28:01Z","id":"1724717","user":{"url":"https://api.github.com/users/KnX24","login":"KnX24","gravatar_id":"af7ac39505351d6ce29b83b4cf848b2f","avatar_url":"https://secure.gravatar.com/avatar/af7ac39505351d6ce29b83b4cf848b2f?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":573963}},{"url":"https://api.github.com/gists/1724847","created_at":"2012-02-02T17:53:53Z","updated_at":"2012-02-02T17:53:53Z","id":"1724847","user":{"url":"https://api.github.com/users/magnet0","login":"magnet0","gravatar_id":"a271404f3466ce79b049a74556d293a2","avatar_url":"https://secure.gravatar.com/avatar/a271404f3466ce79b049a74556d293a2?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":703445}},{"url":"https://api.github.com/gists/1750293","created_at":"2012-02-06T06:48:04Z","updated_at":"2012-02-06T06:48:04Z","id":"1750293","user":{"url":"https://api.github.com/users/kevinmctigue","login":"kevinmctigue","gravatar_id":"9b40f39a0f1ae365638bd053a39870de","avatar_url":"https://secure.gravatar.com/avatar/9b40f39a0f1ae365638bd053a39870de?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":819204}}],"id":"1672254","user":{"url":"https://api.github.com/users/aemkei","login":"aemkei","gravatar_id":"0d9da77bb99bea710cbf711ed08e57d7","avatar_url":"https://secure.gravatar.com/avatar/0d9da77bb99bea710cbf711ed08e57d7?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1521}}