{"html_url":"https://gist.github.com/1757071","url":"https://api.github.com/gists/1757071","created_at":"2012-02-07T03:56:15Z","description":"encodeJavaScriptString in 140byt.es","public":true,"git_pull_url":"git://gist.github.com/1757071.git","files":{"annotated.js":{"type":"application/javascript","content":"function f(a, b)\n{\n  return ++b                                 //`b` is a number when `replace` calls the function\n    ? '\\\\' + (                               //all escape sequences start with a backslash\n      (a = a.charCodeAt(0)) >> 12            //all characters from U+1000 and above\n        ? 'u'                                //must start with `\\u`\n        : a >> 8                             //all characters from U+0100 to U+0FFF\n          ? 'u0'                             //must start with `\\u0`\n          : 'x'                              //characters from U+0000 to U+00FF can start with `\\u00` or `\\x`\n      ) + a.toString(16).toUpperCase()       //add the upper case hex string (it does not contain leading zeros)\n    : a.replace(/[^\\t-~]/g, f)               //else call the function for all non-ASCII characters (all except U+0008 to U+007E)\n}","size":865,"filename":"annotated.js","raw_url":"https://gist.github.com/raw/1757071/74a42aeff84dce872f9175f363cf9a661157d885/annotated.js","language":"JavaScript"},"LICENSE.txt":{"type":"text/plain","content":"            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n                    Version 2, December 2004\n\n Copyright (C) 2012 Thiemo Mättig <http://maettig.com>\n\n Everyone is permitted to copy and distribute verbatim or modified\n copies of this license document, and changing it is allowed as long\n as the name is changed.\n\n            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n\n  0. You just DO WHAT THE FUCK YOU WANT TO.","size":488,"filename":"LICENSE.txt","raw_url":"https://gist.github.com/raw/1757071/a6d76e1bae288ac7eb279b32326e6c03ec31ad24/LICENSE.txt","language":"Text"},"README.md":{"type":"text/plain","content":"Java and JavaScript (.js) source files can use any character encoding. If one programmer uses [UTF-8](http://en.wikipedia.org/wiki/UTF-8) and the other [ISO encoding](http://en.wikipedia.org/wiki/ISO/IEC_8859), there is a chance you will end with something like \"Ren�\" or \"RenÃ©\" instead of \"René\". The most reliable way to avoid all conversion errors is to encode all special characters with escape sequences. JavaScript [allows both](http://es5.github.com/x7.html#x7.8.4) hex (e.g. `\\xFF`) and Unicode escape sequences (e.g. `\\u0100`) in string literals while Java allows Unicode escape sequences only.\n\n[Click here to see it in action](http://maettig.com/code/javascript/encode-javascript-string-in-140byt.es.html).\n\nTested with Opera, Firefox and Internet Explorer 8 (insufficient CSS support, but it works).","size":817,"filename":"README.md","raw_url":"https://gist.github.com/raw/1757071/24ec04fe748b0ef2ad4e566f5491c587b67526aa/README.md","language":"Markdown"},"index.js":{"type":"application/javascript","content":"function f(a,b){return++b?'\\\\'+((a=a.charCodeAt(0))>>12?'u':a>>8?'u0':'x')+a.toString(16).toUpperCase():a.replace(/[^\\t-~]/g,f)}","size":128,"filename":"index.js","raw_url":"https://gist.github.com/raw/1757071/fa21b32de49829726455e5ff9c5bf11e28c1e153/index.js","language":"JavaScript"},"test.html":{"type":"text/html","content":"<!DOCTYPE html>\n<meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\">\n<h1>\n<input id=\"i0\" name=\"lang\" onclick=\"refresh()\" type=\"radio\" checked><label for=\"i0\" title=\"\\u00FF only\">Java String Encoder</label><br>\n<input id=\"i1\" name=\"lang\" onclick=\"refresh()\" type=\"radio\"><label for=\"i1\" title=\"\\xFF and \\u0100\">JavaScript String Encoder</label>\n</h1>\n<textarea onkeyup=\"refresh()\" rows=\"8\" cols=\"100\">// Paste some Java or JavaScript code into this window.\ngerman = \"&Uuml;bergr&ouml;&szlig;e\";\nsmilie = \"&#x263A;\";</textarea>\n<pre onclick=\"select(this)\">This encoding utility requires JavaScript.</pre>\n<script type=\"text/javascript\">\n// 128 bytes\nvar encodeJavaScriptString = function f(a, b)\n{\n  return ++b                                 //`b` is a number when `replace` calls the function\n    ? '\\\\' + (                               //all escape sequences start with a backslash\n      (a = a.charCodeAt(0)) >> 12            //all characters from U+1000 and above\n        ? 'u'                                //must start with `\\u`\n        : a >> 8                             //all characters from U+0100 to U+0FFF\n          ? 'u0'                             //must start with `\\u0`\n          : 'x'                              //characters from U+0000 to U+00FF can start with `\\u00` or `\\x`\n      ) + a.toString(16).toUpperCase()       //add the upper case hex string (it does not contain leading zeros)\n    : a.replace(/[^\\t-~]/g, f)               //else call the function for all non-ASCII characters (all except U+0008 to U+007E)\n}\n// 116 bytes\nvar encodeJavaString = function e(a, b)\n{\n  return ++b                                 //`b` is a number when `replace` calls the function\n    ? '\\\\u' +                                //in Java all escape sequences must start with `\\u`\n      ('00' + a.charCodeAt(0).toString(16))  //build a hex string with at least 4 characters\n      .slice(-4).toUpperCase()               //use the last 4 characters and make them upper case\n    : a.replace(/[^\\t-~]/g, e)               //else call the function for all non-ASCII characters (all except U+0008 to U+007E)\n}\n// 89 bytes\nvar select = function(a, b)\n{\n  b = document.createRange();\n  b.selectNode(a);\n  window.getSelection().addRange(b)\n}\nvar refresh = function()\n{\n  var t = document.getElementsByTagName('TEXTAREA')[0];\n  var p = document.getElementsByTagName('PRE')[0];\n  var f = document.getElementById('i1').checked ? encodeJavaScriptString : encodeJavaString;\n  p.firstChild.data = f(t.value).replace(/\\r\\n/g, '\\n');\n}\nrefresh();\n</script>","size":2564,"filename":"test.html","raw_url":"https://gist.github.com/raw/1757071/8aed416f8fe614afa3788c33a6ea5e0d87383aae/test.html","language":"HTML"},"package.json":{"type":"application/json","content":"{\n  \"name\": \"encodeJavaScriptString\",\n\n  \"description\": \"Converts JavaScript strings to 7 bit US-ASCII.\",\n\n  \"keywords\": [\n    \"encode\",\n    \"escaping\",\n    \"javascript\",\n    \"string\",\n    \"unicode\"\n  ]\n}","size":204,"filename":"package.json","raw_url":"https://gist.github.com/raw/1757071/9b348918800b0d9232110a1b81b0a45b1ea40182/package.json","language":"JSON"}},"git_push_url":"git@gist.github.com:1757071.git","history":[{"url":"https://api.github.com/gists/1757071/1dd1d964f0d7be2c2cea8b2e88fc56bb64d39dd6","version":"1dd1d964f0d7be2c2cea8b2e88fc56bb64d39dd6","committed_at":"2012-02-07T14:04:06Z","change_status":{"additions":3,"deletions":3,"total":6},"user":{"url":"https://api.github.com/users/maettig","login":"maettig","gravatar_id":"c778099c2b124e5c230324df2b2336ab","avatar_url":"https://secure.gravatar.com/avatar/c778099c2b124e5c230324df2b2336ab?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1177987}},{"url":"https://api.github.com/gists/1757071/8fa8fe846430ce12b51955ea04ccd401d7503f22","version":"8fa8fe846430ce12b51955ea04ccd401d7503f22","committed_at":"2012-02-07T04:07:29Z","change_status":{"additions":71,"deletions":59,"total":130},"user":{"url":"https://api.github.com/users/maettig","login":"maettig","gravatar_id":"c778099c2b124e5c230324df2b2336ab","avatar_url":"https://secure.gravatar.com/avatar/c778099c2b124e5c230324df2b2336ab?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1177987}},{"url":"https://api.github.com/gists/1757071/96ff24cc4f871061134de4188fa24cf4b53d3986","version":"96ff24cc4f871061134de4188fa24cf4b53d3986","committed_at":"2011-07-28T06:44:45Z","change_status":{"additions":1,"deletions":1,"total":2},"user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161}},{"url":"https://api.github.com/gists/1757071/1e1c7df97b55fe8f1543433a83d0e76a4a575055","version":"1e1c7df97b55fe8f1543433a83d0e76a4a575055","committed_at":"2011-07-28T06:44:14Z","change_status":{"additions":2,"deletions":2,"total":4},"user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161}},{"url":"https://api.github.com/gists/1757071/97b4f64048ad388d12e0473b416d7e4893391f50","version":"97b4f64048ad388d12e0473b416d7e4893391f50","committed_at":"2011-06-01T13:42:07Z","change_status":{"additions":5,"deletions":7,"total":12},"user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161}},{"url":"https://api.github.com/gists/1757071/df573b0569cc36550aa73fa9244286f24823fbb9","version":"df573b0569cc36550aa73fa9244286f24823fbb9","committed_at":"2011-06-01T12:27:17Z","change_status":{"additions":1,"deletions":0,"total":1},"user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161}},{"url":"https://api.github.com/gists/1757071/2da28b4a103c6a4ca00d4d0fa808ee258b5d6eca","version":"2da28b4a103c6a4ca00d4d0fa808ee258b5d6eca","committed_at":"2011-05-31T22:34:03Z","change_status":{"additions":1,"deletions":1,"total":2},"user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161}},{"url":"https://api.github.com/gists/1757071/cb7ce28cbcfb095a319f290d0632332f22d90c72","version":"cb7ce28cbcfb095a319f290d0632332f22d90c72","committed_at":"2011-05-31T18:15:34Z","change_status":{"additions":13,"deletions":0,"total":13},"user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161}},{"url":"https://api.github.com/gists/1757071/a1fcbcb83329294f8afe9b71c132790e0c1f7d8b","version":"a1fcbcb83329294f8afe9b71c132790e0c1f7d8b","committed_at":"2011-05-31T18:10:31Z","change_status":{"additions":17,"deletions":19,"total":36},"user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161}},{"url":"https://api.github.com/gists/1757071/e69917d0323336a4cb552f60484b73c09eb538ee","version":"e69917d0323336a4cb552f60484b73c09eb538ee","committed_at":"2011-05-26T16:25:15Z","change_status":{"additions":6,"deletions":6,"total":12},"user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161}}],"fork_of":{"html_url":"https://gist.github.com/962807","url":"https://api.github.com/gists/962807","created_at":"2011-05-09T16:13:35Z","description":"140byt.es -- Click ↑↑ fork ↑↑ to play!","public":true,"git_pull_url":"git://gist.github.com/962807.git","files":{"annotated.js":{"type":"application/javascript","size":396,"filename":"annotated.js","raw_url":"https://gist.github.com/raw/962807/cd5c9947f41abdfd608a8995e02ba4a160bb2a08/annotated.js","language":"JavaScript"},"LICENSE.txt":{"type":"text/plain","size":483,"filename":"LICENSE.txt","raw_url":"https://gist.github.com/raw/962807/dfb480a5038214d152544bddb412dfe2e8656413/LICENSE.txt","language":"Text"},"README.md":{"type":"text/plain","size":1457,"filename":"README.md","raw_url":"https://gist.github.com/raw/962807/6832f0d91100cdb4373f2cfd42e12fc06532eac9/README.md","language":"Markdown"},"index.js":{"type":"application/javascript","size":140,"filename":"index.js","raw_url":"https://gist.github.com/raw/962807/c89ef021071af3b78eea79bcf0288a6e7873a62e/index.js","language":"JavaScript"},"test.html":{"type":"text/html","size":393,"filename":"test.html","raw_url":"https://gist.github.com/raw/962807/22ac2a8244f3a1fd650faf81dfdde9cbae7453e5/test.html","language":"HTML"},"package.json":{"type":"application/json","size":241,"filename":"package.json","raw_url":"https://gist.github.com/raw/962807/323b4aaa685a2bf7b15abdeed2fe03e11d63859f/package.json","language":"JSON"}},"git_push_url":"git@gist.github.com:962807.git","comments":51,"updated_at":"2011-05-18T12:15:41Z","id":"962807","user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161}},"comments":4,"updated_at":"2012-02-07T21:29:23Z","forks":[],"id":"1757071","user":{"url":"https://api.github.com/users/maettig","login":"maettig","gravatar_id":"c778099c2b124e5c230324df2b2336ab","avatar_url":"https://secure.gravatar.com/avatar/c778099c2b124e5c230324df2b2336ab?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":1177987}}