{"description":"Chainable DOM Manipulation","created_at":"2011-12-12T09:39:09Z","forks":[],"html_url":"https://gist.github.com/1466219","git_pull_url":"git://gist.github.com/1466219.git","files":{"Readme.md":{"content":"The two functions mentioned here, chainify (https://gist.github.com/gists/1466219) and propertize (https://gist.github.com/1466253) work fine on their own but best when used together.\n\nChainify\n========\nWhen provided with a constructor such as `Element`, `Node`, `CSSStyleDeclaration`, etc, the function will run through every property. If the property is a function, it will be wrapped in another function which will ensure that the return value is the original object.\n\nThis means that you can use the syntax \n\n```\n    document.createElement('a')\n        .setAttribute('data-monkeys', '∞')\n        .addEventListener('click', function(){ alert('Urk! Alert!')}, false)\n```\n\nPropertize\n==========\nSimilar to the chainify function, this takes a constructor as its argument. It adds the method .prop to everything which will set the properties provided either as an object or as a propertyName and propertyValue then return the original object to ensure the outcome is still chainable.\n\n```\n    myElement\n        .prop({\n            'href': 'http://140byt.es/',\n            'title': 'tiny awsm'\n        })\n        .prop('innerHTML', '140byt.es');\n```\n\nWhen the two are combined, you have a completely chainable DOM manipulation tool.\n\nChainvas\n========\nThe idea for the .prop function came from [Lea Verou's Chainvas](http://lea.verou.me/chainvas/). This should be mostly compatible with the syntax (although possibly less robust). You can do the same chainify/propertize on any of the standard constructors - `Element`, `Node`, `CSSStyleDeclaration`, `DOMTokenList`, `CanvasRenderingContext2D` to make any API chainable.","type":"text/plain","raw_url":"https://gist.github.com/raw/1466219/31d9e13fd0de2f329b68b3cb79829530630b22da/Readme.md","size":1620,"filename":"Readme.md","language":"Markdown"},"annotated.js":{"content":"function(\n a,                             // The constructor of the group to make chainable\n                                // e.g. Window.Element, Window.Node, Window.DOMTokenList etc...\n b                              // Placeholder\n c                              // Placeholder\n ) {\n  for(a in                      // Reusing this variable as we don't need it after the next line\n                                // It's now used for the methods in the prototype of the constructor\n     b=a.prototype)             // Shorthand to work with the prototype of the constructor\n  with({d:b[a]})                // Assign the method in here, creating a closure without needing another function wrapper\n   d.call                       // if this is a function\n   ?                            //   Then\n    b[a]=function(){            // make every method a function which\n      return\n      (\n       c=d.apply(this,arguments)//  does its job then assigns its return value\n      )===a._                   //    if the return value was undefined\n       ?                        //     Then\n        this                    //      return 'this'\n       :                        //     Else\n        c                       //      return the intended return value\n   }\n   :                            //   Else (this isn't a function)\n   0                            //  Do nothing\n}","type":"application/javascript","raw_url":"https://gist.github.com/raw/1466219/141b33eb9672c6ef3de902869f5d5fba333e80f7/annotated.js","size":1373,"filename":"annotated.js","language":"JavaScript"},"LICENSE.txt":{"content":"            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n                    Version 2, December 2004\n\n Copyright (C) 2011 Simon Madine <http://thingsinjars.com>\n\n Everyone is permitted to copy and distribute verbatim or modified\n copies of this license document, and changing it is allowed as long\n as the name is changed.\n\n            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n\n  0. You just DO WHAT THE FUCK YOU WANT TO.","type":"text/plain","raw_url":"https://gist.github.com/raw/1466219/96a41fe61b34ba82ec0f3830f3a7a9b04b2f6d67/LICENSE.txt","size":491,"filename":"LICENSE.txt","language":"Text"},"index.js":{"content":"function(a,b,c){for(a in b=a.prototype)with({d:b[a]})d.call?b[a]=function(){return(c=d.apply(this,arguments))===a._?this:c}:0}","type":"application/javascript","raw_url":"https://gist.github.com/raw/1466219/fab854d47b62653b73a6e057b925a923887fd2e6/index.js","size":126,"filename":"index.js","language":"JavaScript"},"test.html":{"content":"<!DOCTYPE html> \n<meta charset=\"utf-8\">\n<title>Chain anything</title>\n<div>Expected value: <b><a href=\"http://140byt.es/\" title=\"tiny awsm\" data-monkeys=\"∞\">140byt.es</a></b></div>\n<div>Actual value: <b id=\"ret\"></b></div>\n<script>\n// This is paired with the propertize gist to cover chainability and setting properties\n\n//This is a very, very minimal version of the functionality of Chainvas (http://lea.verou.me/chainvas/) to make anything chainable\nvar chainify = function(a,b,c){for(a in b=a.prototype)with({d:b[a]})d.call?b[a]=function(){return(c=d.apply(this,arguments))===a._?this:c}:0}\n\n// see https://gist.github.com/gists/1466253\nvar propertize = function(a,b,c){a.prototype.prop=function(){b=arguments;if(1 in b)this[b[0]]=b[1];else{b=b[0];for(c in b)this[c]=b[c]}return this}}\n\n\nchainify(window.Element);\npropertize(window.Element);\n\ndocument.getElementById('ret').appendChild(\n    document.createElement('a')\n        .prop({\n            'href': 'http://140byt.es/',\n            'title': 'tiny awsm'\n        })\n        .prop('innerHTML', '140byt.es')\n        .setAttribute('data-monkeys', '∞')\n        .addEventListener('click', function(){ alert('Urk! Alert!')}, false)\n);\n</script>","type":"text/html","raw_url":"https://gist.github.com/raw/1466219/5df961a9e8c8987fbdd0828c5e44c29879fa1524/test.html","size":1199,"filename":"test.html","language":"HTML"},"package.json":{"content":"{\n  \"name\": \"chainify\",\n\n  \"description\": \"Extremely minimal chainable DOM manipulation based on Chainvas\",\n\n  \"keywords\": [\n    \"html\",\n    \"DOM\",\n    \"chaining\"\n  ]\n}","type":"application/json","raw_url":"https://gist.github.com/raw/1466219/7817b8a369628c41860a0b68592d0ac21017d7bd/package.json","size":168,"filename":"package.json","language":"JSON"}},"public":true,"git_push_url":"git@gist.github.com:1466219.git","user":{"gravatar_id":"9519dfb4fc9300b32fbce7ce91f2375e","avatar_url":"https://secure.gravatar.com/avatar/9519dfb4fc9300b32fbce7ce91f2375e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","url":"https://api.github.com/users/thingsinjars","id":147663,"login":"thingsinjars"},"comments":14,"fork_of":{"description":"140byt.es -- Click ↑↑ fork ↑↑ to play!","created_at":"2011-05-09T16:13:35Z","html_url":"https://gist.github.com/962807","git_pull_url":"git://gist.github.com/962807.git","files":{"annotated.js":{"type":"application/javascript","raw_url":"https://gist.github.com/raw/962807/cd5c9947f41abdfd608a8995e02ba4a160bb2a08/annotated.js","size":396,"filename":"annotated.js","language":"JavaScript"},"LICENSE.txt":{"type":"text/plain","raw_url":"https://gist.github.com/raw/962807/dfb480a5038214d152544bddb412dfe2e8656413/LICENSE.txt","size":483,"filename":"LICENSE.txt","language":"Text"},"README.md":{"type":"text/plain","raw_url":"https://gist.github.com/raw/962807/6832f0d91100cdb4373f2cfd42e12fc06532eac9/README.md","size":1457,"filename":"README.md","language":"Markdown"},"index.js":{"type":"application/javascript","raw_url":"https://gist.github.com/raw/962807/c89ef021071af3b78eea79bcf0288a6e7873a62e/index.js","size":140,"filename":"index.js","language":"JavaScript"},"test.html":{"type":"text/html","raw_url":"https://gist.github.com/raw/962807/22ac2a8244f3a1fd650faf81dfdde9cbae7453e5/test.html","size":393,"filename":"test.html","language":"HTML"},"package.json":{"type":"application/json","raw_url":"https://gist.github.com/raw/962807/323b4aaa685a2bf7b15abdeed2fe03e11d63859f/package.json","size":241,"filename":"package.json","language":"JSON"}},"public":true,"git_push_url":"git@gist.github.com:962807.git","user":{"gravatar_id":"53e21508b6995fa42f2e034b87daa901","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","url":"https://api.github.com/users/140bytes","id":777161,"login":"140bytes"},"comments":51,"updated_at":"2011-05-18T12:15:41Z","id":"962807","url":"https://api.github.com/gists/962807"},"history":[{"change_status":{"additions":3,"total":6,"deletions":3},"user":{"gravatar_id":"9519dfb4fc9300b32fbce7ce91f2375e","avatar_url":"https://secure.gravatar.com/avatar/9519dfb4fc9300b32fbce7ce91f2375e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","url":"https://api.github.com/users/thingsinjars","id":147663,"login":"thingsinjars"},"version":"3eea3162280d142a1141d55f0f94ea513075a94a","url":"https://api.github.com/gists/1466219/3eea3162280d142a1141d55f0f94ea513075a94a","committed_at":"2011-12-19T20:44:53Z"},{"change_status":{"additions":13,"total":22,"deletions":9},"user":null,"version":"ea74bb2f984936c294f7bcfdabd0df3d53fce324","url":"https://api.github.com/gists/1466219/ea74bb2f984936c294f7bcfdabd0df3d53fce324","committed_at":"2011-12-17T21:45:25Z"},{"change_status":{"additions":17,"total":35,"deletions":18},"user":{"gravatar_id":"9519dfb4fc9300b32fbce7ce91f2375e","avatar_url":"https://secure.gravatar.com/avatar/9519dfb4fc9300b32fbce7ce91f2375e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","url":"https://api.github.com/users/thingsinjars","id":147663,"login":"thingsinjars"},"version":"858a25204ab65537b7d0fc03ac8be3144a8e52d9","url":"https://api.github.com/gists/1466219/858a25204ab65537b7d0fc03ac8be3144a8e52d9","committed_at":"2011-12-14T13:42:08Z"},{"change_status":{"additions":22,"total":39,"deletions":17},"user":null,"version":"bde82bcdb60e1f0939e2584028a73787dd3afc5d","url":"https://api.github.com/gists/1466219/bde82bcdb60e1f0939e2584028a73787dd3afc5d","committed_at":"2011-12-14T13:37:33Z"},{"change_status":{"additions":1,"total":2,"deletions":1},"user":{"gravatar_id":"9519dfb4fc9300b32fbce7ce91f2375e","avatar_url":"https://secure.gravatar.com/avatar/9519dfb4fc9300b32fbce7ce91f2375e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","url":"https://api.github.com/users/thingsinjars","id":147663,"login":"thingsinjars"},"version":"738b2afed7137ed7ecbf3ae4df4f93ee8d346105","url":"https://api.github.com/gists/1466219/738b2afed7137ed7ecbf3ae4df4f93ee8d346105","committed_at":"2011-12-13T19:40:07Z"},{"change_status":{"additions":3,"total":6,"deletions":3},"user":{"gravatar_id":"9519dfb4fc9300b32fbce7ce91f2375e","avatar_url":"https://secure.gravatar.com/avatar/9519dfb4fc9300b32fbce7ce91f2375e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","url":"https://api.github.com/users/thingsinjars","id":147663,"login":"thingsinjars"},"version":"fce42d1824119ce75de44e966af03d9e310b9620","url":"https://api.github.com/gists/1466219/fce42d1824119ce75de44e966af03d9e310b9620","committed_at":"2011-12-13T19:36:52Z"},{"change_status":{"additions":6,"total":12,"deletions":6},"user":{"gravatar_id":"9519dfb4fc9300b32fbce7ce91f2375e","avatar_url":"https://secure.gravatar.com/avatar/9519dfb4fc9300b32fbce7ce91f2375e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","url":"https://api.github.com/users/thingsinjars","id":147663,"login":"thingsinjars"},"version":"b19c1388546a0f38e81c43d54aa779b944831000","url":"https://api.github.com/gists/1466219/b19c1388546a0f38e81c43d54aa779b944831000","committed_at":"2011-12-13T19:35:32Z"},{"change_status":{"additions":2,"total":4,"deletions":2},"user":{"gravatar_id":"9519dfb4fc9300b32fbce7ce91f2375e","avatar_url":"https://secure.gravatar.com/avatar/9519dfb4fc9300b32fbce7ce91f2375e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","url":"https://api.github.com/users/thingsinjars","id":147663,"login":"thingsinjars"},"version":"98937988a25b884e48865aa3c25e109f66fa52e6","url":"https://api.github.com/gists/1466219/98937988a25b884e48865aa3c25e109f66fa52e6","committed_at":"2011-12-13T08:22:40Z"},{"change_status":{"additions":33,"total":34,"deletions":1},"user":{"gravatar_id":"9519dfb4fc9300b32fbce7ce91f2375e","avatar_url":"https://secure.gravatar.com/avatar/9519dfb4fc9300b32fbce7ce91f2375e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","url":"https://api.github.com/users/thingsinjars","id":147663,"login":"thingsinjars"},"version":"62061f6958b0f44986e68b5786fb93e3929112e3","url":"https://api.github.com/gists/1466219/62061f6958b0f44986e68b5786fb93e3929112e3","committed_at":"2011-12-12T21:26:54Z"},{"change_status":{"additions":1,"total":2,"deletions":1},"user":null,"version":"dfe15a4c6c9cacc817665563069543f1532841d1","url":"https://api.github.com/gists/1466219/dfe15a4c6c9cacc817665563069543f1532841d1","committed_at":"2011-12-12T19:36:57Z"}],"updated_at":"2011-12-13T19:51:03Z","id":"1466219","url":"https://api.github.com/gists/1466219"}