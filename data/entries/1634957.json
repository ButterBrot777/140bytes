{"url":"https://api.github.com/gists/1634957","created_at":"2012-01-18T19:06:22Z","description":"findDiffBetweenStrings in 140byt.es","public":true,"html_url":"https://gist.github.com/1634957","git_pull_url":"git://gist.github.com/1634957.git","files":{"annotated.js":{"type":"application/javascript","content":"function(a, b)                         //compare these two strings\n{\n  for (var c = 0,                      //start from the first character\n    d = a.length, e = b.length;        //and from the last characters of both strings\n    a[c] &&                            //if not at the end of the string and\n    a[c] == b[c];                      //if both strings are equal at this position\n    c++);                              //go forward\n  for (; d > c && e > c &&             //stop at the position found by the first loop\n    a[d - 1] == b[e - 1];              //if both strings are equal at this position\n    d--) e--;                          //go backward\n  return[c, d - c, e - c]              //return position and lengths of the two substrings found\n}","size":761,"raw_url":"https://gist.github.com/raw/1634957/d2686e45f2fc166cc62aaf9f8d04cb126a375505/annotated.js","filename":"annotated.js","language":"JavaScript"},"LICENSE.txt":{"type":"text/plain","content":"            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n                    Version 2, December 2004\n\n Copyright (C) 2012 Thiemo MÃ¤ttig <http://maettig.com>\n\n Everyone is permitted to copy and distribute verbatim or modified\n copies of this license document, and changing it is allowed as long\n as the name is changed.\n\n            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n\n  0. You just DO WHAT THE FUCK YOU WANT TO.","size":488,"raw_url":"https://gist.github.com/raw/1634957/a6d76e1bae288ac7eb279b32326e6c03ec31ad24/LICENSE.txt","filename":"LICENSE.txt","language":"Text"},"README.md":{"type":"text/plain","content":"I once wrote this [diff](http://en.wikipedia.org/wiki/Diff) toolset in PHP to compare edited database records. The algorithm is very simple and fast and works best with short values, e.g. from a database table with many fields. The core function compares two strings (for example two fields from two versions of an edited database record) and returns three numbers, indicating the position and length of the two substrings that are different in both strings. If only a single character was changed, this particular character is highlighted. If a line contains multiple changes, everything from the first to the last different character is highlighted.\n\n[Click here to see it in action](http://maettig.com/code/javascript/diff-in-140byt.es.html).\n\nPlease note that it does not work in Internet Explorer 9 or below. Replace some `[]` with `.charAt()` to fix this.","size":861,"raw_url":"https://gist.github.com/raw/1634957/dcb1e724d7fc011be5adfd591ea1074ca6359e53/README.md","filename":"README.md","language":"Markdown"},"index.js":{"type":"application/javascript","content":"function(a,b){for(var c=0,d=a.length,e=b.length;a[c]&&a[c]==b[c];c++);for(;d>c&&e>c&&a[d-1]==b[e-1];d--)e--;return[c,d-c,e-c]}","size":126,"raw_url":"https://gist.github.com/raw/1634957/e51a3407a9b15b31d3be9d0f708f4cdae0b75056/index.js","filename":"index.js","language":"JavaScript"},"test.html":{"type":"text/html","content":"<!DOCTYPE html>\n<style type=\"text/css\">\n* { border-collapse: collapse; font-family: sans-serif; }\nth, td { border-bottom: 1px solid #BBB; padding: .5em; }\n.changed { background: #FFD; }\n.changed * + * { background: #EFE; }\nstrong { background: #FEE; border: 1px solid #FBB; border-radius: 2px; color: #E00; }\n</style>\n<table>\n  <tr><th>Old version</th><th>Current version</th></tr>\n  <tr>\n    <td>This is a simple diff algorithm.</td>\n    <td>This is a tiny diff algorithm.</td>\n  </tr>\n  <tr>\n    <td>It's 140 bytes only.</td>\n    <td>It's 126 bytes only.</td>\n  </tr>\n  <tr>\n    <td>It's made for database records to find the location and length of a single change per field.</td>\n    <td>It's made for database records to find the position and length of a single change per field.</td>\n  </tr>\n  <tr>\n    <td>It works bets with short values since it can't separate multiple changes.</td>\n    <td>It works best with short values since it can't seperate multiple changes.</td>\n  </tr>\n  <tr>\n    <td>It should not highlight lines that did not changed.</td>\n    <td>It should not highlight lines that did not changed.</td>\n  </tr>\n  <tr>\n    <td>It should not fail in confusing confusing cases.</td>\n    <td>It should not fail in confusing cases.</td>\n  </tr>\n</table>\n<script type=\"text/javascript\">\nvar diff =\n{\n  // 126 bytes\n  findDiffBetweenStrings: function(a, b) //compare these two strings\n  {\n    for (var c = 0,                      //start from the first character\n      d = a.length, e = b.length;        //and from the last characters of both strings\n      a[c] &&                            //if not at the end of the string and\n      a[c] == b[c];                      //if both strings are equal at this position\n      c++);                              //go forward\n    for (; d > c && e > c &&             //stop at the position found by the first loop\n      a[d - 1] == b[e - 1];              //if both strings are equal at this position\n      d--) e--;                          //go backward\n    return[c, d - c, e - c]              //return position and lengths of the two substrings found\n  },\n  highlightDiff: function(a, b, c)       //element, position and length of the substring found\n  {\n    if (c)                               //skip if nothing was found\n      with (document)\n      {\n        var d = createElement('STRONG');\n        d.appendChild(createTextNode(a.data.substr(b, c)));\n        with (a.parentNode)\n          appendChild(d),\n          appendChild(createTextNode(a.data.slice(b + c))),\n          parentNode.className = 'changed';\n        a.data = a.data.slice(0, b);\n      }\n  },\n  highlight: function(a)                 //requires a table element\n  {\n    a = a.getElementsByTagName('TR');\n    for (var b = a.length; b--; )        //iterate all rows in the table\n    {\n      var c = a[b].getElementsByTagName('TD');\n      if (c[1])\n      {\n        var d = c[0].firstChild, e = c[1].firstChild;\n        c = this.findDiffBetweenStrings(d.data, e.data);\n        this.highlightDiff(d, c[0], c[1]);\n        this.highlightDiff(e, c[0], c[2]);\n      }\n    }\n  }\n}\ndiff.highlight(document.getElementsByTagName('TABLE')[0]);\n</script>","size":3168,"raw_url":"https://gist.github.com/raw/1634957/621592ed94bcd35ee3b302bd16563cd36bcc3cd2/test.html","filename":"test.html","language":"HTML"},"package.json":{"type":"application/json","content":"{\n  \"name\": \"findDiffBetweenStrings\",\n\n  \"description\": \"Simple diff algorithm to compare and highlight the changes in two versions of the same string.\",\n\n  \"keywords\": [\n    \"compare\",\n    \"diff\",\n    \"highlighting\",\n    \"string\"\n  ]\n}","size":236,"raw_url":"https://gist.github.com/raw/1634957/73092fee3b60a9359fce40edd31f13a4d36e22f0/package.json","filename":"package.json","language":"JSON"}},"git_push_url":"git@gist.github.com:1634957.git","history":[{"url":"https://api.github.com/gists/1634957/a687502ca90150773fb983019fccd01ba8ef39a7","version":"a687502ca90150773fb983019fccd01ba8ef39a7","committed_at":"2012-01-19T15:35:07Z","change_status":{"additions":9,"deletions":9,"total":18},"user":{"url":"https://api.github.com/users/maettig","avatar_url":"https://secure.gravatar.com/avatar/c778099c2b124e5c230324df2b2336ab?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"maettig","gravatar_id":"c778099c2b124e5c230324df2b2336ab","id":1177987}},{"url":"https://api.github.com/gists/1634957/7759ddc629f9b22f079c55de18632ced3ef09e97","version":"7759ddc629f9b22f079c55de18632ced3ef09e97","committed_at":"2012-01-18T19:25:17Z","change_status":{"additions":104,"deletions":59,"total":163},"user":{"url":"https://api.github.com/users/maettig","avatar_url":"https://secure.gravatar.com/avatar/c778099c2b124e5c230324df2b2336ab?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"maettig","gravatar_id":"c778099c2b124e5c230324df2b2336ab","id":1177987}},{"url":"https://api.github.com/gists/1634957/96ff24cc4f871061134de4188fa24cf4b53d3986","version":"96ff24cc4f871061134de4188fa24cf4b53d3986","committed_at":"2011-07-28T06:44:45Z","change_status":{"additions":1,"deletions":1,"total":2},"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161}},{"url":"https://api.github.com/gists/1634957/1e1c7df97b55fe8f1543433a83d0e76a4a575055","version":"1e1c7df97b55fe8f1543433a83d0e76a4a575055","committed_at":"2011-07-28T06:44:14Z","change_status":{"additions":2,"deletions":2,"total":4},"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161}},{"url":"https://api.github.com/gists/1634957/97b4f64048ad388d12e0473b416d7e4893391f50","version":"97b4f64048ad388d12e0473b416d7e4893391f50","committed_at":"2011-06-01T13:42:07Z","change_status":{"additions":5,"deletions":7,"total":12},"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161}},{"url":"https://api.github.com/gists/1634957/df573b0569cc36550aa73fa9244286f24823fbb9","version":"df573b0569cc36550aa73fa9244286f24823fbb9","committed_at":"2011-06-01T12:27:17Z","change_status":{"additions":1,"deletions":0,"total":1},"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161}},{"url":"https://api.github.com/gists/1634957/2da28b4a103c6a4ca00d4d0fa808ee258b5d6eca","version":"2da28b4a103c6a4ca00d4d0fa808ee258b5d6eca","committed_at":"2011-05-31T22:34:03Z","change_status":{"additions":1,"deletions":1,"total":2},"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161}},{"url":"https://api.github.com/gists/1634957/cb7ce28cbcfb095a319f290d0632332f22d90c72","version":"cb7ce28cbcfb095a319f290d0632332f22d90c72","committed_at":"2011-05-31T18:15:34Z","change_status":{"additions":13,"deletions":0,"total":13},"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161}},{"url":"https://api.github.com/gists/1634957/a1fcbcb83329294f8afe9b71c132790e0c1f7d8b","version":"a1fcbcb83329294f8afe9b71c132790e0c1f7d8b","committed_at":"2011-05-31T18:10:31Z","change_status":{"additions":17,"deletions":19,"total":36},"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161}},{"url":"https://api.github.com/gists/1634957/e69917d0323336a4cb552f60484b73c09eb538ee","version":"e69917d0323336a4cb552f60484b73c09eb538ee","committed_at":"2011-05-26T16:25:15Z","change_status":{"additions":6,"deletions":6,"total":12},"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161}}],"fork_of":{"url":"https://api.github.com/gists/962807","created_at":"2011-05-09T16:13:35Z","description":"140byt.es -- Click ââ fork ââ to play!","public":true,"html_url":"https://gist.github.com/962807","git_pull_url":"git://gist.github.com/962807.git","files":{"annotated.js":{"type":"application/javascript","size":396,"raw_url":"https://gist.github.com/raw/962807/cd5c9947f41abdfd608a8995e02ba4a160bb2a08/annotated.js","filename":"annotated.js","language":"JavaScript"},"LICENSE.txt":{"type":"text/plain","size":483,"raw_url":"https://gist.github.com/raw/962807/dfb480a5038214d152544bddb412dfe2e8656413/LICENSE.txt","filename":"LICENSE.txt","language":"Text"},"README.md":{"type":"text/plain","size":1457,"raw_url":"https://gist.github.com/raw/962807/6832f0d91100cdb4373f2cfd42e12fc06532eac9/README.md","filename":"README.md","language":"Markdown"},"index.js":{"type":"application/javascript","size":140,"raw_url":"https://gist.github.com/raw/962807/c89ef021071af3b78eea79bcf0288a6e7873a62e/index.js","filename":"index.js","language":"JavaScript"},"test.html":{"type":"text/html","size":393,"raw_url":"https://gist.github.com/raw/962807/22ac2a8244f3a1fd650faf81dfdde9cbae7453e5/test.html","filename":"test.html","language":"HTML"},"package.json":{"type":"application/json","size":241,"raw_url":"https://gist.github.com/raw/962807/323b4aaa685a2bf7b15abdeed2fe03e11d63859f/package.json","filename":"package.json","language":"JSON"}},"git_push_url":"git@gist.github.com:962807.git","comments":51,"updated_at":"2011-05-18T12:15:41Z","id":"962807","user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"140bytes","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161}},"comments":5,"updated_at":"2012-01-18T19:25:17Z","forks":[],"id":"1634957","user":{"url":"https://api.github.com/users/maettig","avatar_url":"https://secure.gravatar.com/avatar/c778099c2b124e5c230324df2b2336ab?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"maettig","gravatar_id":"c778099c2b124e5c230324df2b2336ab","id":1177987}}