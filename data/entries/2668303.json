{"fork_of":{"files":{"annotated.js":{"type":"application/javascript","language":"JavaScript","raw_url":"https://gist.github.com/raw/962807/cd5c9947f41abdfd608a8995e02ba4a160bb2a08/annotated.js","size":396,"filename":"annotated.js"},"LICENSE.txt":{"type":"text/plain","language":"Text","raw_url":"https://gist.github.com/raw/962807/dfb480a5038214d152544bddb412dfe2e8656413/LICENSE.txt","size":483,"filename":"LICENSE.txt"},"README.md":{"type":"text/plain","language":"Markdown","raw_url":"https://gist.github.com/raw/962807/6832f0d91100cdb4373f2cfd42e12fc06532eac9/README.md","size":1457,"filename":"README.md"},"index.js":{"type":"application/javascript","language":"JavaScript","raw_url":"https://gist.github.com/raw/962807/c89ef021071af3b78eea79bcf0288a6e7873a62e/index.js","size":140,"filename":"index.js"},"test.html":{"type":"text/html","language":"HTML","raw_url":"https://gist.github.com/raw/962807/22ac2a8244f3a1fd650faf81dfdde9cbae7453e5/test.html","size":393,"filename":"test.html"},"package.json":{"type":"application/json","language":"JSON","raw_url":"https://gist.github.com/raw/962807/323b4aaa685a2bf7b15abdeed2fe03e11d63859f/package.json","size":241,"filename":"package.json"}},"html_url":"https://gist.github.com/962807","user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161,"login":"140bytes"},"description":"140byt.es -- Click ↑↑ fork ↑↑ to play!","created_at":"2011-05-09T16:13:35Z","public":true,"url":"https://api.github.com/gists/962807","updated_at":"2011-05-18T12:15:41Z","comments":53,"git_pull_url":"git://gist.github.com/962807.git","git_push_url":"git@gist.github.com:962807.git","id":"962807"},"files":{"annotated.js":{"type":"application/javascript","content":"{\n  // Define the channels\n  'channels': {},\n  'after': function (channelName, fn) {\n    // Fallback the channel\n    var channel = (this.channels[channelName] = this.channels[channelName] || []);\n\n    // If the channel has already been run, run the fn\n    if (channel === true) {\n      fn();\n    } else {\n    // Otherwise, add the function\n      channel.push(fn);\n    }\n  },\n  'fire': function (channelName) {\n    // Fallback the channel\n    var channel = (this.channels[channelName] || []),\n        i = channel.length;\n\n    // Iterate and call the functions\n    while (i--) {\n      channel[i]();\n    }\n\n    // Set up the channel for atomic bindings\n    this.channels[channelName] = true;\n  }\n}","language":"JavaScript","raw_url":"https://gist.github.com/raw/2668303/e581cff4a69c5cb6cb89d21706876543ce51d74d/annotated.js","size":694,"filename":"annotated.js"},"LICENSE.txt":{"type":"text/plain","content":"            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n                    Version 2, December 2004\n\n Copyright (C) 2011 YOUR_NAME_HERE <YOUR_URL_HERE>\n\n Everyone is permitted to copy and distribute verbatim or modified\n copies of this license document, and changing it is allowed as long\n as the name is changed.\n\n            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n\n  0. You just DO WHAT THE FUCK YOU WANT TO.","language":"Text","raw_url":"https://gist.github.com/raw/2668303/dfb480a5038214d152544bddb412dfe2e8656413/LICENSE.txt","size":483,"filename":"LICENSE.txt"},"README.md":{"type":"text/plain","content":"Atomic Event Emitter\n====================\nOccasionally, you have a race condition between two asynchronous functions where one must run after the other. This atomic event emitter is built just for that.\n\n```\nvar atomic = {s:{},after:function(n,f,c){c=this.s[n]=this.s[n]||[];c==1?f():c.push(f)},fire:function(n,c,f){for(c=this.s[n]||[];f=c.pop();)f();this.s[n]=1}};\nsetTimeout(function () {\n  atomic.fire('first');\n}, 100);\nsetTimeout(function () {\n  atomic.after('first', function () {\n    console.log('First must have run before this');\n  });\n}, 70 + (Math.random() * 60));\n```\n\nTested in\n---------\nThis code is **not** tested anywhere (browsers and node).","language":"Markdown","raw_url":"https://gist.github.com/raw/2668303/ce6ce99ff7298f4a74148c55f5b82149e610d5f8/README.md","size":658,"filename":"README.md"},"index.js":{"type":"application/javascript","content":"function(s,f,c){s={};return{after:function(n,f){c=s[n]=s[n]||[];c==1?f():c.push(f)},fire:function(n){for(c=s[n]||[];f=c.pop();)f();s[n]=1}}}","language":"JavaScript","raw_url":"https://gist.github.com/raw/2668303/6854752c0453f21cc48efb766b88e2379e4cdbad/index.js","size":140,"filename":"index.js"},"test.html":{"type":"text/html","content":"<!DOCTYPE html>\n<title>Atomic Event</title>\n<div>Expected value: <b>First must have run before this</b></div>\n<div>Actual value: <b id=\"ret\"></b></div>\n<script>\n  // write a small example that shows off the API for your example\n  // and tests it in one fell swoop.\n\n  var atomic = (function(s,f,c){s={};return{after:function(n,f){c=s[n]=s[n]||[];c==1?f():c.push(f)},fire:function(n){for(c=s[n]||[];f=c.pop();)f();s[n]=1}}})();\n  setTimeout(function () {\n    window.first = true;\n    atomic.fire('first');\n  }, 100);\n  setTimeout(function () {\n    atomic.after('first', function () {\n      if (window.first === true) {\n        document.getElementById( \"ret\" ).innerHTML = 'First must have run before this';\n      }\n    });\n  }, 70 + (Math.random() * 60));\n</script>","language":"HTML","raw_url":"https://gist.github.com/raw/2668303/82901b31f0b2425d7a9668bfb27102b9bc4e4cdf/test.html","size":764,"filename":"test.html"},"package.json":{"type":"application/json","content":"{\n  \"name\": \"atomicEvent\",\n\n  \"description\": \"Atomic event emitter for solving your race conditions\",\n\n  \"keywords\": [\n    \"atomic\",\n    \"event\",\n    \"emitter\",\n    \"race\",\n    \"condition\"\n  ]\n}","language":"JSON","raw_url":"https://gist.github.com/raw/2668303/cea289a94a8a4b16fde1dccd4d86b52c126ef200/package.json","size":194,"filename":"package.json"}},"html_url":"https://gist.github.com/2668303","user":{"url":"https://api.github.com/users/twolfson","avatar_url":"https://secure.gravatar.com/avatar/15927fc52919e9223adc7ed99e125d4d?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","gravatar_id":"15927fc52919e9223adc7ed99e125d4d","id":902488,"login":"twolfson"},"description":"Atomic event emitter for solving your race conditions","created_at":"2012-05-12T19:16:53Z","history":[{"user":{"url":"https://api.github.com/users/twolfson","avatar_url":"https://secure.gravatar.com/avatar/15927fc52919e9223adc7ed99e125d4d?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","gravatar_id":"15927fc52919e9223adc7ed99e125d4d","id":902488,"login":"twolfson"},"change_status":{"additions":4,"total":5,"deletions":1},"url":"https://api.github.com/gists/2668303/c4c4a39370f12bbc0953dce5f5e3c0693e534eb9","committed_at":"2012-05-14T17:32:38Z","version":"c4c4a39370f12bbc0953dce5f5e3c0693e534eb9"},{"user":{"url":"https://api.github.com/users/twolfson","avatar_url":"https://secure.gravatar.com/avatar/15927fc52919e9223adc7ed99e125d4d?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","gravatar_id":"15927fc52919e9223adc7ed99e125d4d","id":902488,"login":"twolfson"},"change_status":{"additions":18,"total":18,"deletions":0},"url":"https://api.github.com/gists/2668303/f25cf1926bf4e899cdf2c1ff6c46f95f32a7e593","committed_at":"2012-05-12T19:30:42Z","version":"f25cf1926bf4e899cdf2c1ff6c46f95f32a7e593"},{"user":{"url":"https://api.github.com/users/twolfson","avatar_url":"https://secure.gravatar.com/avatar/15927fc52919e9223adc7ed99e125d4d?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","gravatar_id":"15927fc52919e9223adc7ed99e125d4d","id":902488,"login":"twolfson"},"change_status":{"additions":55,"total":116,"deletions":61},"url":"https://api.github.com/gists/2668303/42717ae0b205987b69d7a6aeb32ba46ae52d2ba1","committed_at":"2012-05-12T19:22:37Z","version":"42717ae0b205987b69d7a6aeb32ba46ae52d2ba1"},{"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161,"login":"140bytes"},"change_status":{"additions":1,"total":2,"deletions":1},"url":"https://api.github.com/gists/2668303/96ff24cc4f871061134de4188fa24cf4b53d3986","committed_at":"2011-07-28T06:44:45Z","version":"96ff24cc4f871061134de4188fa24cf4b53d3986"},{"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161,"login":"140bytes"},"change_status":{"additions":2,"total":4,"deletions":2},"url":"https://api.github.com/gists/2668303/1e1c7df97b55fe8f1543433a83d0e76a4a575055","committed_at":"2011-07-28T06:44:14Z","version":"1e1c7df97b55fe8f1543433a83d0e76a4a575055"},{"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161,"login":"140bytes"},"change_status":{"additions":5,"total":12,"deletions":7},"url":"https://api.github.com/gists/2668303/97b4f64048ad388d12e0473b416d7e4893391f50","committed_at":"2011-06-01T13:42:07Z","version":"97b4f64048ad388d12e0473b416d7e4893391f50"},{"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161,"login":"140bytes"},"change_status":{"additions":1,"total":1,"deletions":0},"url":"https://api.github.com/gists/2668303/df573b0569cc36550aa73fa9244286f24823fbb9","committed_at":"2011-06-01T12:27:17Z","version":"df573b0569cc36550aa73fa9244286f24823fbb9"},{"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161,"login":"140bytes"},"change_status":{"additions":1,"total":2,"deletions":1},"url":"https://api.github.com/gists/2668303/2da28b4a103c6a4ca00d4d0fa808ee258b5d6eca","committed_at":"2011-05-31T22:34:03Z","version":"2da28b4a103c6a4ca00d4d0fa808ee258b5d6eca"},{"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161,"login":"140bytes"},"change_status":{"additions":13,"total":13,"deletions":0},"url":"https://api.github.com/gists/2668303/cb7ce28cbcfb095a319f290d0632332f22d90c72","committed_at":"2011-05-31T18:15:34Z","version":"cb7ce28cbcfb095a319f290d0632332f22d90c72"},{"user":{"url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","gravatar_id":"53e21508b6995fa42f2e034b87daa901","id":777161,"login":"140bytes"},"change_status":{"additions":17,"total":36,"deletions":19},"url":"https://api.github.com/gists/2668303/a1fcbcb83329294f8afe9b71c132790e0c1f7d8b","committed_at":"2011-05-31T18:10:31Z","version":"a1fcbcb83329294f8afe9b71c132790e0c1f7d8b"}],"public":true,"url":"https://api.github.com/gists/2668303","forks":[],"updated_at":"2012-05-12T19:22:37Z","comments":2,"git_pull_url":"git://gist.github.com/2668303.git","git_push_url":"git@gist.github.com:2668303.git","id":"2668303"}