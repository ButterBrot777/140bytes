{"forks":[{"user":{"url":"https://api.github.com/users/cmevans2","id":150755,"avatar_url":"https://secure.gravatar.com/avatar/6f7328ef7295bc21e2c489e499e121a6?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"cmevans2"},"url":"https://api.github.com/gists/1126984","id":"1126984","updated_at":"2011-08-05T05:51:24Z","created_at":"2011-08-05T05:51:24Z"}],"files":{"annotated.js":{"content":"function(\n  a, // the subscription object\n  b, // the current event number\n  c  // (placeholder)\n){\n  return {            // return an object, with\n    pub: function(    // a \"pub\" function that takes\n      d,              // a channel name and\n      e               // a message value,\n    ){                // and\n      for(            // for each\n        c             // subscriber\n        in a          // in the subscription object,\n      ) if (          // if\n        c             // its name, with the event number discarded\n          .split      // by splitting it\n          (\"-\")       // with a hyphen and\n          [0]         // taking only the first part,\n          == d        // is equal to the published channel\n      ) a[c](e)       // call the subscriber. and if\n        !== !1 ||     // the value returned is false\n        delete a[c]   // unsubscribe by removing the subscriber, and\n    },\n    \n    sub: function(    // a \"sub\" function that takes\n      d,              // a channel name and\n      e               // a subscriber function\n    ){                // and,\n      a[              // on the subscriptions object,\n        d +           // sets the name of the channel appended with \n        --b           // a hyphen and the decremented event number, to \n      ] = e           // the function passed.\n    }\n  }\n}(    // auto-run with\n  {}, // the subscription object\n  0   // and event id.\n)","raw_url":"https://gist.github.com/raw/976046/c58887cb574ad247a06a9916b5c44833dfa800b7/annotated.js","size":1422,"filename":"annotated.js"},"LICENSE.txt":{"content":"            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n                    Version 2, December 2004\n\n Copyright (C) 2011 Jed Schmidt <http://jed.is>\n\n Everyone is permitted to copy and distribute verbatim or modified\n copies of this license document, and changing it is allowed as long\n as the name is changed.\n\n            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n\n  0. You just DO WHAT THE FUCK YOU WANT TO.","raw_url":"https://gist.github.com/raw/976046/36a7fa2bb27f413b3412bc15590ddeb27ccea232/LICENSE.txt","size":480,"filename":"LICENSE.txt"},"test.js":{"content":"// Define the pubsub object, which provides the \"pub\" and \"sub\" methods.\nvar pubsub = function(a,b,c){return{pub:function(d,e){for(c in a)if(c.split(\"-\")[0]==d)a[c](e)!==!1||delete a[c]},sub:function(d,e){a[d+--b]=e}}}({},0)\n\n// Subscribe to the \"random\" channel, returning false to unsubscribe.\npubsub.sub(\"random\", function( msg ) {\n  console.log(\"this is called once: \" + msg);\n  return false;\n})\n\n// Subscribe to the \"random\" channel, and always renew.\npubsub.sub(\"random\", function( msg ) {\n  console.log(\"this is called forever: \" + msg);\n})\n\n// Subscribe to the \"random\" channel, but set an\n// expiration date 5 seconds in the future, and\n// unsubscribe when the date is reached.\nexpiration = +new Date + 5000\npubsub.sub(\"random\", function( msg ) {\n  console.log( \"this is called for 5 seconds: \" + msg);\n  return +new Date < expiration;\n})\n\n// Publish a random number between 1 and 10 to\n// the \"random\" channel every second.\nsetInterval( function(){ pubsub.pub( \"random\", 0|Math.random()*10 ) }, 1000 )","raw_url":"https://gist.github.com/raw/976046/ec59b79c7be8dc72af6b353cf31ca726751ea5af/test.js","size":1011,"filename":"test.js"},"index.js":{"content":"function(a,b,c){return{pub:function(d,e){for(c in a)if(c.split(\"-\")[0]==d)a[c](e)!==!1||delete a[c]},sub:function(d,e){a[d+--b]=e}}}({},0)","raw_url":"https://gist.github.com/raw/976046/0f77169af6d65200336db6986419cb553b891dfb/index.js","size":138,"filename":"index.js"},"package.json":{"content":"{\n  \"name\": \"pubsub\",\n  \"keywords\": [ \"pubsub\", \"observer\", \"publish\", \"subscribe\" ]\n}","raw_url":"https://gist.github.com/raw/976046/1b399ad9cd3dd285e371b557068dfba65fc62863/package.json","size":86,"filename":"package.json"}},"user":{"url":"https://api.github.com/users/jed","id":4433,"avatar_url":"https://secure.gravatar.com/avatar/7b72d5a18ab92129692e97a76a153fe0?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"jed"},"url":"https://api.github.com/gists/976046","description":"publish/subscribe, or pubsub","public":true,"comments":4,"history":[{"user":{"url":"https://api.github.com/users/jed","id":4433,"avatar_url":"https://secure.gravatar.com/avatar/7b72d5a18ab92129692e97a76a153fe0?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"jed"},"url":"https://api.github.com/gists/976046/a931af0eaf4ce3a791bbcb12b2eaa4b9af8344a7","committed_at":"2011-05-31T18:24:13Z","version":"a931af0eaf4ce3a791bbcb12b2eaa4b9af8344a7","change_status":{"deletions":20,"additions":13,"total":33}},{"user":{"url":"https://api.github.com/users/jed","id":4433,"avatar_url":"https://secure.gravatar.com/avatar/7b72d5a18ab92129692e97a76a153fe0?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"jed"},"url":"https://api.github.com/gists/976046/7dac634b02dbe83023d04c66a3a0963bf38d9592","committed_at":"2011-05-22T09:55:36Z","version":"7dac634b02dbe83023d04c66a3a0963bf38d9592","change_status":{"deletions":1,"additions":1,"total":2}},{"user":{"url":"https://api.github.com/users/jed","id":4433,"avatar_url":"https://secure.gravatar.com/avatar/7b72d5a18ab92129692e97a76a153fe0?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"jed"},"url":"https://api.github.com/gists/976046/30ed29f9d226fe4b772af4acfc3569d0ee91aee4","committed_at":"2011-05-17T06:56:15Z","version":"30ed29f9d226fe4b772af4acfc3569d0ee91aee4","change_status":{"deletions":3,"additions":87,"total":90}},{"user":null,"url":"https://api.github.com/gists/976046/7192cb2428e074b230709d9ed88fcc7ceaca5928","committed_at":"2011-05-13T10:29:31Z","version":"7192cb2428e074b230709d9ed88fcc7ceaca5928","change_status":{"deletions":1,"additions":1,"total":2}},{"user":null,"url":"https://api.github.com/gists/976046/7082517c20fe3438b87d5058cac7309599b6054c","committed_at":"2011-05-13T10:26:37Z","version":"7082517c20fe3438b87d5058cac7309599b6054c","change_status":{"deletions":0,"additions":4,"total":4}},{"user":null,"url":"https://api.github.com/gists/976046/6f326db58477dfe77a8f69baa6e70dcdf1530d5f","committed_at":"2011-05-09T16:13:35Z","version":"6f326db58477dfe77a8f69baa6e70dcdf1530d5f","change_status":{"deletions":0,"additions":1,"total":1}}],"git_pull_url":"git://gist.github.com/976046.git","git_push_url":"git@gist.github.com:976046.git","fork_of":{"files":{"annotated.js":{"raw_url":"https://gist.github.com/raw/962807/cd5c9947f41abdfd608a8995e02ba4a160bb2a08/annotated.js","size":396,"filename":"annotated.js"},"LICENSE.txt":{"raw_url":"https://gist.github.com/raw/962807/dfb480a5038214d152544bddb412dfe2e8656413/LICENSE.txt","size":483,"filename":"LICENSE.txt"},"README.md":{"raw_url":"https://gist.github.com/raw/962807/6832f0d91100cdb4373f2cfd42e12fc06532eac9/README.md","size":1457,"filename":"README.md"},"index.js":{"raw_url":"https://gist.github.com/raw/962807/c89ef021071af3b78eea79bcf0288a6e7873a62e/index.js","size":140,"filename":"index.js"},"test.html":{"raw_url":"https://gist.github.com/raw/962807/22ac2a8244f3a1fd650faf81dfdde9cbae7453e5/test.html","size":393,"filename":"test.html"},"package.json":{"raw_url":"https://gist.github.com/raw/962807/323b4aaa685a2bf7b15abdeed2fe03e11d63859f/package.json","size":241,"filename":"package.json"}},"user":{"url":"https://api.github.com/users/140bytes","id":777161,"avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","login":"140bytes"},"url":"https://api.github.com/gists/962807","description":"140byt.es -- Click ↑↑ fork ↑↑ to play!","public":true,"comments":45,"git_pull_url":"git://gist.github.com/962807.git","git_push_url":"git@gist.github.com:962807.git","id":"962807","updated_at":"2011-05-18T12:15:41Z","created_at":"2011-05-09T16:13:35Z","html_url":"https://gist.github.com/962807"},"id":"976046","updated_at":"2011-05-22T09:55:36Z","created_at":"2011-05-17T06:33:27Z","html_url":"https://gist.github.com/976046"}