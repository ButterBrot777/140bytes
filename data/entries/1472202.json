{"description":"Lazy (and synchronous) Module Declaration in 126 bytes","created_at":"2011-12-13T13:56:27Z","git_push_url":"git@gist.github.com:1472202.git","html_url":"https://gist.github.com/1472202","fork_of":{"description":"140byt.es -- Click ↑↑ fork ↑↑ to play!","created_at":"2011-05-09T16:13:35Z","git_push_url":"git@gist.github.com:962807.git","html_url":"https://gist.github.com/962807","files":{"annotated.js":{"type":"application/javascript","size":396,"raw_url":"https://gist.github.com/raw/962807/cd5c9947f41abdfd608a8995e02ba4a160bb2a08/annotated.js","filename":"annotated.js","language":"JavaScript"},"LICENSE.txt":{"type":"text/plain","size":483,"raw_url":"https://gist.github.com/raw/962807/dfb480a5038214d152544bddb412dfe2e8656413/LICENSE.txt","filename":"LICENSE.txt","language":"Text"},"README.md":{"type":"text/plain","size":1457,"raw_url":"https://gist.github.com/raw/962807/6832f0d91100cdb4373f2cfd42e12fc06532eac9/README.md","filename":"README.md","language":"Markdown"},"index.js":{"type":"application/javascript","size":140,"raw_url":"https://gist.github.com/raw/962807/c89ef021071af3b78eea79bcf0288a6e7873a62e/index.js","filename":"index.js","language":"JavaScript"},"test.html":{"type":"text/html","size":393,"raw_url":"https://gist.github.com/raw/962807/22ac2a8244f3a1fd650faf81dfdde9cbae7453e5/test.html","filename":"test.html","language":"HTML"},"package.json":{"type":"application/json","size":241,"raw_url":"https://gist.github.com/raw/962807/323b4aaa685a2bf7b15abdeed2fe03e11d63859f/package.json","filename":"package.json","language":"JSON"}},"public":true,"user":{"gravatar_id":"53e21508b6995fa42f2e034b87daa901","url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161,"login":"140bytes"},"comments":51,"updated_at":"2011-05-18T12:15:41Z","git_pull_url":"git://gist.github.com/962807.git","id":"962807","url":"https://api.github.com/gists/962807"},"files":{"annotated.js":{"content":"function (\nmodules, // map of modules\nmain,    // main module function\nmodule,  // tmp var\ninited_modules // list of inited modules\n) {\n    inited_modules = {}; // init\n    main(function require(moduleName) { // pass require fucntion only\n        module = modules[moduleName];\n        if (!inited_modules[moduleName]) { // lazy init\n            try {\n                if (module[0]=='(') { // its a lazy module\n                    module = (0,this.eval)(module); // global eval it!\n                }\n                module = module(require); // lazy module init\n            } catch(e){}\n        }\n        inited_modules[moduleName] = 1; // mark module as inited\n        return modules[moduleName] = module; // return\n    });\n}","type":"application/javascript","size":725,"raw_url":"https://gist.github.com/raw/1472202/8e856b82ac4e6ecd85c8720b09c5f20d1d7a8b99/annotated.js","filename":"annotated.js","language":"JavaScript"},"LICENSE.txt":{"content":"            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n                    Version 2, December 2004\n\n Copyright (C) 2011 Mikhail Davydov\n\n Everyone is permitted to copy and distribute verbatim or modified\n copies of this license document, and changing it is allowed as long\n as the name is changed.\n\n            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n\n  0. You just DO WHAT THE FUCK YOU WANT TO.","type":"text/plain","size":468,"raw_url":"https://gist.github.com/raw/1472202/09a1d3cf5e27c8f8ff070dd33a8a14c847674b8a/LICENSE.txt","filename":"LICENSE.txt","language":"Text"},"README.md":{"content":"LMD in 126 bytes\n================\n\nBig JavaScript application cause huge startup latency. A 1Mb of JavaScript initializes about ~600-3000ms! without touching any part of DOM. LMD is inspired by AMD and provides similar module interface. It evals module only when they are required.\n\n1. Modules are similar to AMD: there is a require, but no define (all defined on startup) nor exports (module function returns object)\n2. All modules are loaded at startup\n3. Each function-module is initialized (evaled) on demand\n\nOriginal LMD: https://github.com/azproduction/lmd\n\nDemo: http://jsfiddle.net/SKNHH/1/","type":"text/plain","size":599,"raw_url":"https://gist.github.com/raw/1472202/56f6d3239440c6cf34fd9b76344191929795da7a/README.md","filename":"README.md","language":"Markdown"},"index.js":{"content":"function(a,b,c,d){d={},b(function e(b){c=a[b];if(!d[b])try{c[0]==\"(\"&&(c=(0,eval)(c)),c=c(e)}catch(f){}return d[b]=1,a[b]=c})}","type":"application/javascript","size":126,"raw_url":"https://gist.github.com/raw/1472202/123f41de506ef28cb40a4e7cd6422283d9bbe94b/index.js","filename":"index.js","language":"JavaScript"},"test.html":{"content":"<!DOCTYPE html> \n<title>Lmd</title>\n<div>Expected value: <b>Hello World, %username%!</b></div>\n<div>Actual value: <b id=\"ret\"></b></div>\n<script>\nvar mods = {\n    \"i18n\": {\"hello\": \"Hello\", \"world\": \"World\"},\n    \"lazy_module_render\": \"(function (require) {var i18n = require('i18n');return {'hw': function(name){return i18n.hello + ' ' + i18n.world + ', ' + name + '!'}}})\",      \n    \"module_printer\": function printer(require) {\n        return function (text) {\n            document.getElementById(\"ret\").innerHTML = text;\n        }\n    }\n};\n\nvar main = function (require) {\n    var render = require(\"lazy_module_render\"),\n        print = require(\"module_printer\");\n\n    print(render.hw('%username%'));\n};\n\n(function(a,b,c,d){d={},b(function e(b){c=a[b];if(!d[b])try{c[0]==\"(\"&&(c=(0,eval)(c)),c=c(e)}catch(f){}return d[b]=1,a[b]=c})})\n(mods, main);\n</script>","type":"text/html","size":862,"raw_url":"https://gist.github.com/raw/1472202/db5591c83cab809fd1340e0148f5cca8e1307f92/test.html","filename":"test.html","language":"HTML"},"package.json":{"content":"{\n  \"name\": \"lmd\",\n\n  \"description\": \"Lazy (and synchronous) Module Declaration\",\n\n  \"keywords\": [\n    \"lmd\",\n    \"amd\",\n    \"module\",\n    \"synchronous\"\n  ]\n}","type":"application/json","size":158,"raw_url":"https://gist.github.com/raw/1472202/d57caf9d9620a08157e08ba42fdf9e77ed2d3e20/package.json","filename":"package.json","language":"JSON"}},"public":true,"user":{"gravatar_id":"b827d6cfdfbcfce33700b0e6cc03e344","url":"https://api.github.com/users/azproduction","avatar_url":"https://secure.gravatar.com/avatar/b827d6cfdfbcfce33700b0e6cc03e344?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":483865,"login":"azproduction"},"comments":7,"forks":[],"history":[{"user":{"gravatar_id":"b827d6cfdfbcfce33700b0e6cc03e344","url":"https://api.github.com/users/azproduction","avatar_url":"https://secure.gravatar.com/avatar/b827d6cfdfbcfce33700b0e6cc03e344?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":483865,"login":"azproduction"},"version":"13ecff553a536626bb37061367cce9503c9f1a6f","committed_at":"2011-12-13T14:40:38Z","url":"https://api.github.com/gists/1472202/13ecff553a536626bb37061367cce9503c9f1a6f","change_status":{"additions":1,"total":2,"deletions":1}},{"user":{"gravatar_id":"b827d6cfdfbcfce33700b0e6cc03e344","url":"https://api.github.com/users/azproduction","avatar_url":"https://secure.gravatar.com/avatar/b827d6cfdfbcfce33700b0e6cc03e344?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":483865,"login":"azproduction"},"version":"43ee2f419f7c9e17a7b9b74a83bc281e4226e492","committed_at":"2011-12-13T14:17:53Z","url":"https://api.github.com/gists/1472202/43ee2f419f7c9e17a7b9b74a83bc281e4226e492","change_status":{"additions":55,"total":107,"deletions":52}},{"user":{"gravatar_id":"53e21508b6995fa42f2e034b87daa901","url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161,"login":"140bytes"},"version":"96ff24cc4f871061134de4188fa24cf4b53d3986","committed_at":"2011-07-28T06:44:45Z","url":"https://api.github.com/gists/1472202/96ff24cc4f871061134de4188fa24cf4b53d3986","change_status":{"additions":1,"total":2,"deletions":1}},{"user":{"gravatar_id":"53e21508b6995fa42f2e034b87daa901","url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161,"login":"140bytes"},"version":"1e1c7df97b55fe8f1543433a83d0e76a4a575055","committed_at":"2011-07-28T06:44:14Z","url":"https://api.github.com/gists/1472202/1e1c7df97b55fe8f1543433a83d0e76a4a575055","change_status":{"additions":2,"total":4,"deletions":2}},{"user":{"gravatar_id":"53e21508b6995fa42f2e034b87daa901","url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161,"login":"140bytes"},"version":"97b4f64048ad388d12e0473b416d7e4893391f50","committed_at":"2011-06-01T13:42:07Z","url":"https://api.github.com/gists/1472202/97b4f64048ad388d12e0473b416d7e4893391f50","change_status":{"additions":5,"total":12,"deletions":7}},{"user":{"gravatar_id":"53e21508b6995fa42f2e034b87daa901","url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161,"login":"140bytes"},"version":"df573b0569cc36550aa73fa9244286f24823fbb9","committed_at":"2011-06-01T12:27:17Z","url":"https://api.github.com/gists/1472202/df573b0569cc36550aa73fa9244286f24823fbb9","change_status":{"additions":1,"total":1,"deletions":0}},{"user":{"gravatar_id":"53e21508b6995fa42f2e034b87daa901","url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161,"login":"140bytes"},"version":"2da28b4a103c6a4ca00d4d0fa808ee258b5d6eca","committed_at":"2011-05-31T22:34:03Z","url":"https://api.github.com/gists/1472202/2da28b4a103c6a4ca00d4d0fa808ee258b5d6eca","change_status":{"additions":1,"total":2,"deletions":1}},{"user":{"gravatar_id":"53e21508b6995fa42f2e034b87daa901","url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161,"login":"140bytes"},"version":"cb7ce28cbcfb095a319f290d0632332f22d90c72","committed_at":"2011-05-31T18:15:34Z","url":"https://api.github.com/gists/1472202/cb7ce28cbcfb095a319f290d0632332f22d90c72","change_status":{"additions":13,"total":13,"deletions":0}},{"user":{"gravatar_id":"53e21508b6995fa42f2e034b87daa901","url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161,"login":"140bytes"},"version":"a1fcbcb83329294f8afe9b71c132790e0c1f7d8b","committed_at":"2011-05-31T18:10:31Z","url":"https://api.github.com/gists/1472202/a1fcbcb83329294f8afe9b71c132790e0c1f7d8b","change_status":{"additions":17,"total":36,"deletions":19}},{"user":{"gravatar_id":"53e21508b6995fa42f2e034b87daa901","url":"https://api.github.com/users/140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161,"login":"140bytes"},"version":"e69917d0323336a4cb552f60484b73c09eb538ee","committed_at":"2011-05-26T16:25:15Z","url":"https://api.github.com/gists/1472202/e69917d0323336a4cb552f60484b73c09eb538ee","change_status":{"additions":6,"total":12,"deletions":6}}],"updated_at":"2011-12-13T14:17:53Z","git_pull_url":"git://gist.github.com/1472202.git","id":"1472202","url":"https://api.github.com/gists/1472202"}