{"forks":[],"files":{"annotated.js":{"content":"function(\n\ta, // array of deferreds (each implements \"then\")\n\tb, // on complete callback\n\tc  // placeholder for finished deferred count\n){\n\tc = 0, \t\t\t\t\t\t\t// initialize complete counter\n\ta.forEach( function(d, e, f){ \t// for each deferred\n\t\td.then( function(){ \t\t// attach a \"then\" callback\n\t\t\tf[e] = arguments, \t\t// that puts the passed args in to an ordered array\n\t\t\t++c == a.length\t\t\t// mark that this deferred is resolved\n\t\t\t\t&& \t\t\t\t\t// if all deferreds have resolved...\n\t\t\t\tb.apply({}, a) \t\t// ...fire callback, using {} as context\t\n\t\t} )\n\t})\n}\n\n// this version is longer (still under 140!),\n// but can be used in envs without Array.forEach\nfunction(\n\ta, // array of deferreds (each implements \"then\")\n\tb, // on complete callback\n\tc, // placeholder\n\td, // placeholder\n\te  // placeholder\n){ \t\n\tfor(\t\t\t\t\t// loop through all deferreds, in reverse order\n\t\tc = d = a.length, \t// keep length for later\n\t\te = 0; \t\t\t\t// initialize complete counter\n\t\td--;\t\t\t\t// loop until zero\n\t) \n\ta[d] \t\t\t\t\t\t// grab deferred, \n\t.then( function(i){\t\t\t// set callback to returned fn,\n\t\treturn function(){ \t\t// capturing the deferred's arg position (d)\t\n\t\t\ta[i] = arguments, \t// save callback args, preserving order\n\t\t\t++e == c \t\t\t// mark that this deferred is resolved\n\t\t\t\t&& \t\t\t\t// if all deferreds have resolved...\n\t\t\t\tb.apply({}, a) \t// ...fire callback, using {} as context\t\n\t\t}\n\t}(d) )\t\n}","size":1372,"filename":"annotated.js","raw_url":"https://gist.github.com/raw/1126368/f001e40a24e03ab10bcbec7abfa76f53334f7a79/annotated.js"},"LICENSE.txt":{"content":"            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n                    Version 2, December 2004\n\n Copyright (C) 2011 Andrew Petersen <http://kirbysayshi.github.com>\n\n Everyone is permitted to copy and distribute verbatim or modified\n copies of this license document, and changing it is allowed as long\n as the name is changed.\n\n            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n\n  0. You just DO WHAT THE FUCK YOU WANT TO.","size":500,"filename":"LICENSE.txt","raw_url":"https://gist.github.com/raw/1126368/ea5cbf013b142d0c8d48d47318c03e093b17014b/LICENSE.txt"},"README.md":{"content":"When, a Deferred Utility\n=========\n\nEasily wait until all deferreds (implementing 'then') have been resolved. Accepts two arguments, an array of deferreds (must have a 'then' method accepting a callback) and a master callback, that is fired when all deferreds have been resolved. Each deferred's resolved value(s) are then passed as argument objects to the callback. This is best used with a modified version of [nano-q](nano-q, https://gist.github.com/1129049), which allows for an arbitrary number of values to be passed into the 'resolve' method. This works with the [original nano-q](https://gist.github.com/976971) as well.\n\n\n","size":631,"filename":"README.md","raw_url":"https://gist.github.com/raw/1126368/1db989a01921bb17aff169f3faa0ec9bcd8a0cbb/README.md"},"index.js":{"content":"function(a,b,c){c=0,a.forEach(function(d,e,f){d.then(function(){f[e]=arguments,++c==a.length&&b.apply({},a)})})}","size":112,"filename":"index.js","raw_url":"https://gist.github.com/raw/1126368/7a386ba7c305962fcc9451188d31d5e10432a9dd/index.js"},"test.html":{"content":"<!DOCTYPE html> \n<title>When, for deferreds</title>\n<div>Expected value: <br/><b>what when how</b><br /><b>what when how</b></div>\n<div>Actual value: <b id=\"ret\"></b></div>\n<script>\n\n\t// modified nano-q, allows for multiple args to resolve(): https://gist.github.com/1129049\n\tvar dfd = function(a,b){a=[];return{resolve:function(){b=arguments;while(a.length)a.shift().apply({},b);a=0},then:function(c){a?a.push(c):c.apply({},b)}}}\n\n\t// this is the \"official\" version, but requires Array.prototype.forEach\n\tvar when = function(a,b,c){c=0,a.forEach(function(d,e,f){d.then(function(){f[e]=arguments,++c==a.length&&b.apply({},a)})})}\n\n\t// this does not require Array.prototype.forEach\n\tvar whenNoES5 = function(a,b,c,d,e){for(c=d=a.length,e=0;d--;)a[d].then(function(d){return function(){a[d]=arguments,++e==c&&b.apply({},a)}}(d))}\n\n\tvar a = dfd(), b = dfd(), c = dfd()\n\n\twhenNoES5( [a, b, c], function(a, b, c){ \n\t\tdocument.getElementById( \"ret\" ).innerHTML += \n\t\t\t'<br />' + a[1] + b[1] + c[1]\n\t});\n\n\twhen( [a, b, c], function(a, b, c){ \n\t\tdocument.getElementById( \"ret\" ).innerHTML += \n\t\t\t'<br />' + a[1] + b[1] + c[1]\n\t});\n\n\ta.resolve( new Error(), 'what ' )\n\tb.resolve( null, 'when ' )\n\tc.resolve( null, 'how' )\n\n</script>","size":1223,"filename":"test.html","raw_url":"https://gist.github.com/raw/1126368/cb01c75afd02df4a9d0a4b005c14ffcc3e360fdd/test.html"},"package.json":{"content":"{\n  \"name\": \"when\",\n\n  \"description\": \"A jQuery-like 'when' (or 'join') for nano-q, (https://gist.github.com/1129049).\",\n\n  \"keywords\": [\n    \"deferred\",\n    \"defer\",\n    \"when\",\n    \"utility\"\n  ]\n}","size":198,"filename":"package.json","raw_url":"https://gist.github.com/raw/1126368/55a18d1a9ec279570c4a8e8923066ab11f72763a/package.json"}},"html_url":"https://gist.github.com/1126368","user":{"url":"https://api.github.com/users/kirbysayshi","login":"kirbysayshi","avatar_url":"https://secure.gravatar.com/avatar/4b138a56fa1e625a8b59a128519c7b64?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":90831},"git_pull_url":"git://gist.github.com/1126368.git","url":"https://api.github.com/gists/1126368","description":"when: Easily fire a callback when all deferreds are complete","public":true,"comments":0,"git_push_url":"git@gist.github.com:1126368.git","history":[{"change_status":{"deletions":2,"additions":2,"total":4},"committed_at":"2011-08-13T06:03:42Z","user":{"url":"https://api.github.com/users/kirbysayshi","login":"kirbysayshi","avatar_url":"https://secure.gravatar.com/avatar/4b138a56fa1e625a8b59a128519c7b64?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":90831},"url":"https://api.github.com/gists/1126368/edf9ff2708edbe32a7e29cce5f3a505c643c103d","version":"edf9ff2708edbe32a7e29cce5f3a505c643c103d"},{"change_status":{"deletions":17,"additions":49,"total":66},"committed_at":"2011-08-13T05:49:10Z","user":{"url":"https://api.github.com/users/kirbysayshi","login":"kirbysayshi","avatar_url":"https://secure.gravatar.com/avatar/4b138a56fa1e625a8b59a128519c7b64?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":90831},"url":"https://api.github.com/gists/1126368/d365726b005b86571a9a3299cbd2a9f549de622f","version":"d365726b005b86571a9a3299cbd2a9f549de622f"},{"change_status":{"deletions":4,"additions":4,"total":8},"committed_at":"2011-08-09T16:37:34Z","user":{"url":"https://api.github.com/users/kirbysayshi","login":"kirbysayshi","avatar_url":"https://secure.gravatar.com/avatar/4b138a56fa1e625a8b59a128519c7b64?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":90831},"url":"https://api.github.com/gists/1126368/9f284daccf2dd9dfa0a75addf28dc1d880101e4b","version":"9f284daccf2dd9dfa0a75addf28dc1d880101e4b"},{"change_status":{"deletions":17,"additions":1,"total":18},"committed_at":"2011-08-07T02:08:09Z","user":{"url":"https://api.github.com/users/kirbysayshi","login":"kirbysayshi","avatar_url":"https://secure.gravatar.com/avatar/4b138a56fa1e625a8b59a128519c7b64?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":90831},"url":"https://api.github.com/gists/1126368/3fa4a6a685290b4de7a66626e2b398d2a5ccdd86","version":"3fa4a6a685290b4de7a66626e2b398d2a5ccdd86"},{"change_status":{"deletions":0,"additions":0,"total":0},"committed_at":"2011-08-07T02:05:20Z","user":{"url":"https://api.github.com/users/kirbysayshi","login":"kirbysayshi","avatar_url":"https://secure.gravatar.com/avatar/4b138a56fa1e625a8b59a128519c7b64?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":90831},"url":"https://api.github.com/gists/1126368/f17c00d006965645c9f6f7731ae7520ba5ea1f63","version":"f17c00d006965645c9f6f7731ae7520ba5ea1f63"},{"change_status":{"deletions":52,"additions":59,"total":111},"committed_at":"2011-08-07T01:56:04Z","user":{"url":"https://api.github.com/users/kirbysayshi","login":"kirbysayshi","avatar_url":"https://secure.gravatar.com/avatar/4b138a56fa1e625a8b59a128519c7b64?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":90831},"url":"https://api.github.com/gists/1126368/96ce122a2bd94b016d7452c8521a8b764b11bd72","version":"96ce122a2bd94b016d7452c8521a8b764b11bd72"},{"change_status":{"deletions":1,"additions":1,"total":2},"committed_at":"2011-07-28T06:44:45Z","user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161},"url":"https://api.github.com/gists/1126368/96ff24cc4f871061134de4188fa24cf4b53d3986","version":"96ff24cc4f871061134de4188fa24cf4b53d3986"},{"change_status":{"deletions":2,"additions":2,"total":4},"committed_at":"2011-07-28T06:44:14Z","user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161},"url":"https://api.github.com/gists/1126368/1e1c7df97b55fe8f1543433a83d0e76a4a575055","version":"1e1c7df97b55fe8f1543433a83d0e76a4a575055"},{"change_status":{"deletions":7,"additions":5,"total":12},"committed_at":"2011-06-01T13:42:07Z","user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161},"url":"https://api.github.com/gists/1126368/97b4f64048ad388d12e0473b416d7e4893391f50","version":"97b4f64048ad388d12e0473b416d7e4893391f50"},{"change_status":{"deletions":0,"additions":1,"total":1},"committed_at":"2011-06-01T12:27:17Z","user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161},"url":"https://api.github.com/gists/1126368/df573b0569cc36550aa73fa9244286f24823fbb9","version":"df573b0569cc36550aa73fa9244286f24823fbb9"}],"fork_of":{"files":{"annotated.js":{"size":396,"filename":"annotated.js","raw_url":"https://gist.github.com/raw/962807/cd5c9947f41abdfd608a8995e02ba4a160bb2a08/annotated.js"},"LICENSE.txt":{"size":483,"filename":"LICENSE.txt","raw_url":"https://gist.github.com/raw/962807/dfb480a5038214d152544bddb412dfe2e8656413/LICENSE.txt"},"README.md":{"size":1457,"filename":"README.md","raw_url":"https://gist.github.com/raw/962807/6832f0d91100cdb4373f2cfd42e12fc06532eac9/README.md"},"index.js":{"size":140,"filename":"index.js","raw_url":"https://gist.github.com/raw/962807/c89ef021071af3b78eea79bcf0288a6e7873a62e/index.js"},"test.html":{"size":393,"filename":"test.html","raw_url":"https://gist.github.com/raw/962807/22ac2a8244f3a1fd650faf81dfdde9cbae7453e5/test.html"},"package.json":{"size":241,"filename":"package.json","raw_url":"https://gist.github.com/raw/962807/323b4aaa685a2bf7b15abdeed2fe03e11d63859f/package.json"}},"html_url":"https://gist.github.com/962807","user":{"url":"https://api.github.com/users/140bytes","login":"140bytes","avatar_url":"https://secure.gravatar.com/avatar/53e21508b6995fa42f2e034b87daa901?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png","id":777161},"git_pull_url":"git://gist.github.com/962807.git","url":"https://api.github.com/gists/962807","description":"140byt.es -- Click ↑↑ fork ↑↑ to play!","public":true,"comments":45,"git_push_url":"git@gist.github.com:962807.git","id":"962807","updated_at":"2011-05-18T12:15:41Z","created_at":"2011-05-09T16:13:35Z"},"id":"1126368","updated_at":"2011-08-07T02:05:20Z","created_at":"2011-08-04T21:44:48Z"}